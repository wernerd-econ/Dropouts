
Script distance.do in StataMP started at 2026-02-04 17:16:36
Script distance.do finished successfully at 2026-02-04 17:16:37
Output:

  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 19.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2025 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Unlimited-user 4-core network, expiring 21 Jul 2026
Serial number: 501909302705
  Licensed to: Daniel Werner
               Stanford

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased; see help set_maxvar.

. do distance.do 

. * =============================================================================
. * Description:
. *   This script makes the histogram of distances to the pacific. 
. *
. * Author: Daniel Werner 
. * Date: Feb. 04, 2026
. * =============================================================================
. 
. * -----------------------------
. * 0) Set paths and create folders
. * -----------------------------
. global FIGURES "../output/Figures/"

. capture mkdir "${FIGURES}"

. 
. use "/Users/wernerd/Desktop/Daniel Werner/final_geo.dta", clear

. 
. * Drop duplicates (keep only unique municipality observations)
. duplicates drop municipality, force

Duplicates in terms of municipality

(0 observations are duplicates)

. 
. * Make histogram
. histogram d_to_pc, ///
>     frequency ///
>     fcolor(maroon) ///
>     lcolor(black) ///
>     xlabel(, angle(0) nogrid) ///
>     ylabel(, angle(0) nogrid) ///
>     xtitle("Distance to pacific coast (km)") ///
>     ytitle("Number of municipalities") ///
>     title("") ///
>     graphregion(color(white)) plotregion(color(white))
(bin=33, start=.40003493, width=27.973491)

.         
. * Save the graph
. graph export "${FIGURES}d_to_pc_distribution.pdf", replace
file /Users/wernerd/Desktop/Dropouts/2_analysis/source/../output/Figures/d_to_pc_distribution.pdf saved as PDF format

. 
end of do-file

The following files were created in distance.do:
d_to_pc_distribution.pdf 

Script cocaine_seiz.do in StataMP started at 2026-02-04 17:16:37
Script cocaine_seiz.do finished successfully at 2026-02-04 17:16:38
Output:

  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 19.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2025 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Unlimited-user 4-core network, expiring 21 Jul 2026
Serial number: 501909302705
  Licensed to: Daniel Werner
               Stanford

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased; see help set_maxvar.

. do cocaine_seiz.do 

. * =============================================================================
. * Description:
. *   This script makes the descriptive stats for cocaine seizures that
. *   appear in the paper. 
. *
. * Author: Daniel Werner 
. * Date: Feb. 03, 2026
. * =============================================================================
. * -----------------------------
. * 0) Set paths and create folders
. * -----------------------------
. global TABLES  "../output/Tables/"

. global FIGURES "../output/Figures/"

. capture mkdir "${TABLES}"

. capture mkdir "${FIGURES}"

. 
. * =============================================================================
. * I. Create Summary Statistics By Period 
. * =============================================================================
. use "/Users/wernerd/Desktop/Daniel Werner/seizure_data.dta", clear

. 
. * Create date variable
. destring Year Month, replace
Year already numeric; no replace
Month: all characters numeric; replaced as byte

. gen year_month = ym(Year, Month)

. format year_month %tm

. 
. * Keep big coastal seizure in tonns and events
. keep Year Month year_month cs_big cs_big_n

. 
. * Create period variable
. gen Period = ""
(216 missing values generated)

. replace Period = "Calderón's War on Drugs" if year_month >= ym(2007,1) & year_month <= ym(2012,12)
variable Period was str1 now str24
(72 real changes made)

. replace Period = "Intermediate Period" if year_month >= ym(2013,1) & year_month <= ym(2016,12)
(48 real changes made)

. replace Period = "Respike" if year_month >= ym(2017,1) & year_month <= ym(2024,12)
(96 real changes made)

. 
. preserve

. 
. collapse (mean) mean_cs_big=cs_big mean_cs_big_n=cs_big_n ///
>                  (p50) median_cs_big=cs_big median_cs_big_n=cs_big_n ///
>          (sd) sd_cs_big=cs_big sd_cs_big_n=cs_big_n, ///
>          by(Period)

. 
. * Add overall stats
. tempfile period_stats

. save `period_stats'
file /var/folders/r_/70svtsrx2k563rzqwg09prpw0000gn/T//S_18927.000002 saved as .dta format

. restore

. 
. * Get overall stats for cs_big
. summarize cs_big, detail

                           cs_big
-------------------------------------------------------------
      Percentiles      Smallest
 1%        1.714            .75
 5%      2.64079          1.241
10%     3.856309          1.714       Obs                 216
25%     6.646743          2.069       Sum of wgt.         216

50%     10.88018                      Mean           12.30363
                        Largest       Std. dev.      7.705673
75%      16.8092       32.32213
90%     23.40662       32.95473       Variance        59.3774
95%     29.50578       34.01712       Skewness       .9155121
99%     32.95473       35.40355       Kurtosis       3.234034

. local overall_mean_big = r(mean)

. local overall_sd_big = r(sd)

. local overall_median_big = r(p50)

. 
. * Get overall stats for cs_big_n
. summarize cs_big_n, detail

                          cs_big_n
-------------------------------------------------------------
      Percentiles      Smallest
 1%            1              1
 5%            3              1
10%            4              1       Obs                 216
25%            5              2       Sum of wgt.         216

50%            9                      Mean           9.324074
                        Largest       Std. dev.      5.351511
75%           12             22
90%           17             22       Variance       28.63867
95%           20             26       Skewness       .8219838
99%           22             28       Kurtosis       3.217488

. local overall_mean_big_n = r(mean)

. local overall_sd_big_n = r(sd)

. local overall_median_big_n = r(p50)

. 
. use `period_stats', clear

. set obs `=_N+1'
Number of observations (_N) was 3, now 4.

. replace Period = "Overall" in `=_N'
(1 real change made)

. replace mean_cs_big = `overall_mean_big' in `=_N'
(1 real change made)

. replace sd_cs_big = `overall_sd_big' in `=_N'
(1 real change made)

. replace median_cs_big = `overall_median_big' in `=_N'
(1 real change made)

. replace mean_cs_big_n = `overall_mean_big_n' in `=_N'
(1 real change made)

. replace sd_cs_big_n = `overall_sd_big_n' in `=_N'
(1 real change made)

. replace median_cs_big_n = `overall_median_big_n' in `=_N'
(1 real change made)

. 
. * Order the periods
. gen order = .
(4 missing values generated)

. replace order = 1 if Period == "Overall"
(1 real change made)

. replace order = 2 if Period == "Calderón's War on Drugs"
(1 real change made)

. replace order = 3 if Period == "Intermediate Period"
(1 real change made)

. replace order = 4 if Period == "Respike"
(1 real change made)

. sort order

. 
. * Save variables with proper formatting
. * cs_big variables
. local overall_big : display %6.3f mean_cs_big[1]

. local overall_big_sd : display %6.3f sd_cs_big[1]

. local overall_big_median : display %6.3f median_cs_big[1]

. local calderon_big : display %6.3f mean_cs_big[2]

. local calderon_big_sd : display %6.3f sd_cs_big[2]

. local calderon_big_median : display %6.3f median_cs_big[2]

. local inter_big : display %6.3f mean_cs_big[3]

. local inter_big_sd : display %6.3f sd_cs_big[3]

. local inter_big_median : display %6.3f median_cs_big[3]

. local respike_big : display %6.3f mean_cs_big[4]

. local respike_big_sd : display %6.3f sd_cs_big[4]

. local respike_big_median : display %6.3f median_cs_big[4]

. 
. * cs_big_n variables
. local overall_n : display %6.3f mean_cs_big_n[1]

. local overall_n_sd : display %6.3f sd_cs_big_n[1]

. local overall_n_median : display %6.3f median_cs_big_n[1]

. local calderon_n : display %6.3f mean_cs_big_n[2]

. local calderon_n_sd : display %6.3f sd_cs_big_n[2]

. local calderon_n_median : display %6.3f median_cs_big_n[2]

. local inter_n : display %6.3f mean_cs_big_n[3]

. local inter_n_sd : display %6.3f sd_cs_big_n[3]

. local inter_n_median : display %6.3f median_cs_big_n[3]

. local respike_n : display %6.3f mean_cs_big_n[4]

. local respike_n_sd : display %6.3f sd_cs_big_n[4]

. local respike_n_median : display %6.3f median_cs_big_n[4]

. 
. * Write table 
. file open myfile using "${TABLES}seizure_stats.tex", write replace
(file ../output/Tables/seizure_stats.tex not found)

. 
. * Write table header
. file write myfile "\begin{tabular}{l c c c c}" _n

. file write myfile "\hline" _n

. file write myfile ///
> " & \shortstack{Full sample \\ (2007-2024)}" ///
> " & \shortstack{War on drugs \\  (2007-2012)}" ///
> " & \shortstack{Interim \\  (2013-2016)}" ///
> " & \shortstack{Resurgence \\  (2017-2024)} \\"  _n

. file write myfile "\hline" _n

. 
. * Panel A: cs_big
. file write myfile "\multicolumn{5}{l}{\textit{Panel A: Seizures (Metric Tons)}} \\" _n

. file write myfile "Mean" _n

. file write myfile " & `overall_big' & `calderon_big' & `inter_big' & `respike_big' \\" _n

. file write myfile "Median" _n

. file write myfile " & `overall_big_median' & `calderon_big_median' & `inter_big_median' & `respike_big_median' \\" _n

. file write myfile "Std. dev" _n

. file write myfile " & `overall_big_sd' & `calderon_big_sd' & `inter_big_sd' & `respike_big_sd' \\" _n

. file write myfile "\hline" _n

. 
. * Panel B: cs_big_n
. file write myfile "\multicolumn{5}{l}{\textit{Panel B: Seizure Events}} \\" _n

. file write myfile "Mean" _n

. file write myfile " & `overall_n' & `calderon_n' & `inter_n' & `respike_n' \\" _n

. file write myfile "Median" _n

. file write myfile " & `overall_n_median' & `calderon_n_median' & `inter_n_median' & `respike_n_median' \\" _n

. file write myfile "Std. dev" _n

. file write myfile " & `overall_n_sd' & `calderon_n_sd' & `inter_n_sd' & `respike_n_sd' \\" _n

. 
. * Close table
. file write myfile "\hline" _n

. file write myfile "\end{tabular}" _n

. file close myfile

. * =============================================================================
. * II. Create Time Seires Plots Of Ntl HR and Average Municipal HR 
. * =============================================================================
. use "/Users/wernerd/Desktop/Daniel Werner/seizure_data.dta", clear

. 
. * Keep big coastal seizure in tons and events
. keep Year Month cs_big

. 
. * Create date variable for monthly data
. destring Month, replace
Month: all characters numeric; replaced as byte

. gen year_month = ym(Year, Month)

. format year_month %tm

. 
. * Collapse to monthly level
. preserve

. collapse (sum) cs_big_monthly=cs_big, by(year_month)

. tempfile monthly_data

. save `monthly_data'
file /var/folders/r_/70svtsrx2k563rzqwg09prpw0000gn/T//S_18927.000004 saved as .dta format

. restore

. 
. * Collapse to yearly level
. collapse (sum) cs_big_yearly=cs_big, by(Year)

. 
. * Create yearly date variable (use middle of year for plotting)
. gen year_month = ym(Year, 7)  // July of each year

. format year_month %tm

. 
. * Merge with monthly data
. merge 1:m year_month using `monthly_data'

    Result                      Number of obs
    -----------------------------------------
    Not matched                           198
        from master                         0  (_merge==1)
        from using                        198  (_merge==2)

    Matched                                18  (_merge==3)
    -----------------------------------------

. 
. sort year_month

. 
. * Create the plot
. twoway ///
>     (line cs_big_monthly year_month, lwidth(thin) lcolor(navy)) ///
>     (line cs_big_yearly year_month, lwidth(thin) lcolor(red) lpattern(solid)) ///
>     , ///
>     xline(`=ym(2013,1)' `=ym(2017,1)', ///
>           lpattern(dash) lcolor(black) lwidth(thin)) ///
>     xlabel( ///
>         `=ym(2007,1)' "2007" ///
>         `=ym(2008,1)' "2008" ///
>         `=ym(2009,1)' "2009" ///
>         `=ym(2010,1)' "2010" ///
>         `=ym(2011,1)' "2011" ///
>         `=ym(2012,1)' "2012" ///
>         `=ym(2013,1)' "2013" ///
>         `=ym(2014,1)' "2014" ///
>         `=ym(2015,1)' "2015" ///
>         `=ym(2016,1)' "2016" ///
>         `=ym(2017,1)' "2017" ///
>         `=ym(2018,1)' "2018" ///
>         `=ym(2019,1)' "2019" ///
>         `=ym(2020,1)' "2020" ///
>         `=ym(2021,1)' "2021" ///
>         `=ym(2022,1)' "2022" ///
>         `=ym(2023,1)' "2023" ///
>         `=ym(2024,1)' "2024", ///
>         angle(45) nogrid ///
>     ) ///
>     ylabel(, angle(0) nogrid) ///
>     xtitle("") ///
>     ytitle("Metric tonnes") ///
>     title("") ///
>     legend( ///
>         order(1 "Monthly seizures" 2 "Yearly seizures") ///
>         position(6) ring(1) cols(2))

.                 
. * Save the graph
. graph export "${FIGURES}Seizure_TS.pdf", replace
file /Users/wernerd/Desktop/Dropouts/2_analysis/source/../output/Figures/Seizure_TS.pdf saved as PDF format

. 
end of do-file

The following files were created in cocaine_seiz.do:
Seizure_TS.pdf 

Script homicides.do in StataMP started at 2026-02-04 17:16:38
Script homicides.do finished successfully at 2026-02-04 17:16:39
Output:

  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 19.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2025 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Unlimited-user 4-core network, expiring 21 Jul 2026
Serial number: 501909302705
  Licensed to: Daniel Werner
               Stanford

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased; see help set_maxvar.

. do homicides.do 

. * =============================================================================
. * Description:
. *   This script makes the descriptive stats and figures for homicide rates that
. *   appear in the paper. 
. *
. * Author: Daniel Werner 
. * Date: Feb. 03, 2026
. * =============================================================================
. * -----------------------------
. * 0) Set paths and create folders
. * -----------------------------
. global TABLES  "../output/Tables/"

. global FIGURES "../output/Figures/"

. capture mkdir "${TABLES}"

. capture mkdir "${FIGURES}"

. 
. * =============================================================================
. * I. Create Summary Statistics By Period 
. * =============================================================================
. use "/Users/wernerd/Desktop/Daniel Werner/homicides.dta", clear

. 
. * Collapse to month-year level
. collapse (sum) hom_ntl=homicides pop_ntl=pop_tot, by(year month)

. 
. * Calculate homicide rate per 10,000
. gen ntl_hr = (hom_ntl / pop_ntl) * 10000

. 
. * Create date variable
. destring year month, replace
year: all characters numeric; replaced as int
month: all characters numeric; replaced as byte

. gen year_month = ym(year, month)

. format year_month %tm

. 
. * Create period variable
. gen Period = ""
(204 missing values generated)

. replace Period = "Calderón's War on Drugs" if year_month >= ym(2007,1) & year_month <= ym(2012,12)
variable Period was str1 now str24
(72 real changes made)

. replace Period = "Intermediate Period" if year_month >= ym(2013,1) & year_month <= ym(2016,12)
(48 real changes made)

. replace Period = "Respike" if year_month >= ym(2017,1) & year_month <= ym(2024,12)
(84 real changes made)

. 
. preserve

. 
. * Calculate stats by period
. statsby mean_hr=r(mean) sd_hr=r(sd) median_hr=r(p50), by(Period) clear: summarize ntl_hr, detail
(running summarize on estimation sample)

      Command: summarize ntl_hr, detail
      mean_hr: r(mean)
        sd_hr: r(sd)
    median_hr: r(p50)
           By: Period

Statsby groups:
...

. 
. * Add overall stats
. tempfile period_stats

. save `period_stats'
file /var/folders/r_/70svtsrx2k563rzqwg09prpw0000gn/T//S_18949.000002 saved as .dta format

. restore

. summarize ntl_hr, detail

                           ntl_hr
-------------------------------------------------------------
      Percentiles      Smallest
 1%     .0531619       .0398428
 5%     .0615532       .0446418
10%     .1041937       .0531619       Obs                 204
25%     .1250219       .0533926       Sum of wgt.         204

50%     .1662279                      Mean           .1559952
                        Largest       Std. dev.      .0428006
75%     .1897138       .2162278
90%     .2042382       .2175671       Variance       .0018319
95%      .208877        .219906       Skewness      -.7158433
99%     .2175671        .219995       Kurtosis       2.779542

. local overall_mean = r(mean)

. local overall_sd = r(sd)

. local overall_median = r(p50)

. use `period_stats', clear
(statsby: summarize)

. set obs `=_N+1'
Number of observations (_N) was 3, now 4.

. replace Period = "Overall" in `=_N'
(1 real change made)

. replace mean_hr = `overall_mean' in `=_N'
(1 real change made)

. replace sd_hr = `overall_sd' in `=_N'
(1 real change made)

. replace median_hr = `overall_median' in `=_N'
(1 real change made)

. 
. * Order the periods
. gen order = .
(4 missing values generated)

. replace order = 1 if Period == "Overall"
(1 real change made)

. replace order = 2 if Period == "Calderón's War on Drugs"
(1 real change made)

. replace order = 3 if Period == "Intermediate Period"
(1 real change made)

. replace order = 4 if Period == "Respike"
(1 real change made)

. sort order

. 
. * Save variables with proper formatting
. local overall_hr : display %6.3f mean_hr[1]

. local overall_sd : display %6.3f sd_hr[1]

. local overall_median : display %6.3f median_hr[1]

. local calderon_hr : display %6.3f mean_hr[2]

. local calderon_sd : display %6.3f sd_hr[2]

. local calderon_median : display %6.3f median_hr[2]

. local inter_hr : display %6.3f mean_hr[3]

. local inter_sd : display %6.3f sd_hr[3]

. local inter_median : display %6.3f median_hr[3]

. local respike_hr : display %6.3f mean_hr[4]

. local respike_sd : display %6.3f sd_hr[4]

. local respike_median : display %6.3f median_hr[4]

. 
. * Write table 
. file open myfile using "${TABLES}hom_stats.tex", write replace
(file ../output/Tables/hom_stats.tex not found)

. * Write table header
. file write myfile "\begin{tabular}{l c c c c}" _n

. file write myfile "\hline" _n

. file write myfile ///
> " & \shortstack{Full sample \\ (2007-2024)}" ///
> " & \shortstack{War on drugs \\  (2007-2012)}" ///
> " & \shortstack{Interim \\  (2013-2016)}" ///
> " & \shortstack{Resurgence \\  (2017-2024)} \\"  _n

. file write myfile "\hline" _n

. * Mean row
. file write myfile "Mean" _n

. file write myfile " & `overall_hr' & `calderon_hr' & `inter_hr' & `respike_hr' \\" _n

. * Median row
. file write myfile "Median" _n

. file write myfile " & `overall_median' & `calderon_median' & `inter_median' & `respike_median' \\" _n

. * SD row
. file write myfile "Std. dev" _n

. file write myfile " & `overall_sd' & `calderon_sd' & `inter_sd' & `respike_sd' \\" _n

. * Close table
. file write myfile "\hline" _n

. file write myfile "\end{tabular}" _n

. file close myfile

. 
. * =============================================================================
. * II. Create Time Seires Plots Of Ntl HR and Average Municipal HR 
. * =============================================================================
. use "/Users/wernerd/Desktop/Daniel Werner/homicides.dta", clear

. 
. keep homicides pop_tot hr year month

. 
. * Collapse to month-year level
. collapse (sum) hom_ntl=homicides pop_ntl=pop_tot (mean) avg_mun_hom=hr, by(year month)

. 
. * Calculate national homicide rate per 10,000
. gen ntl_hr = (hom_ntl / pop_ntl) * 10000

. 
. * Create date variable
. destring year month, replace
year: all characters numeric; replaced as int
month: all characters numeric; replaced as byte

. gen year_month = ym(year, month)

. format year_month %tm

. 
. sort year month

. 
. * Create the plot
. twoway ///
>     (line ntl_hr year_month, lwidth(medium)) ///
>     (line avg_mun_hom year_month, lwidth(medium) lpattern(dash)) ///
>     , ///
>         xline(`=ym(2013,1)' `=ym(2017,1)', ///
>           lpattern(dash) lcolor(black) lwidth(thin)) ///
>     xlabel( ///
>         `=ym(2007,1)' "2007" ///
>         `=ym(2008,1)' "2008" ///
>         `=ym(2009,1)' "2009" ///
>         `=ym(2010,1)' "2010" ///
>         `=ym(2011,1)' "2011" ///
>         `=ym(2012,1)' "2012" ///
>         `=ym(2013,1)' "2013" ///
>         `=ym(2014,1)' "2014" ///
>         `=ym(2015,1)' "2015" ///
>         `=ym(2016,1)' "2016" ///
>         `=ym(2017,1)' "2017" ///
>         `=ym(2018,1)' "2018" ///
>         `=ym(2019,1)' "2019" ///
>         `=ym(2020,1)' "2020" ///
>         `=ym(2021,1)' "2021" ///
>         `=ym(2022,1)' "2022" ///
>         `=ym(2023,1)' "2023" ///
>         `=ym(2024,1)' "2024", ///
>         angle(45) nogrid ///
>     ) ///
>     ylabel(, angle(0) nogrid) ///
>     xtitle("") ///
>     ytitle("Homicides per ten thousand") ///
>     title("") ///
>     legend( ///
>         order(1 "National homicide rate" 2 "Average municipal homicide rate") ///
>         position(6) ring(1) cols(2))

. 
. 
. * Save the graph
. graph export "${FIGURES}Homicide_TS.pdf", replace
file /Users/wernerd/Desktop/Dropouts/2_analysis/source/../output/Figures/Homicide_TS.pdf saved as PDF format

. 
. 
end of do-file

The following files were created in homicides.do:
Homicide_TS.pdf 

Script enoe.do in StataMP started at 2026-02-04 17:16:39
Script enoe.do finished successfully at 2026-02-04 17:16:47
Output:

  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 19.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2025 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Unlimited-user 4-core network, expiring 21 Jul 2026
Serial number: 501909302705
  Licensed to: Daniel Werner
               Stanford

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased; see help set_maxvar.

. do enoe.do 

. * =============================================================================
. * Description:
. *   This script makes the descriptive stats and figures for ENOE that
. *   appear in the paper. 
. *
. * Author: Daniel Werner 
. * Date: Feb. 03, 2026
. * =============================================================================
. * -----------------------------
. * 0) Set paths and create folders
. * -----------------------------
. global TABLES  "../output/Tables/"

. global FIGURES "../output/Figures/"

. capture mkdir "${TABLES}"

. capture mkdir "${FIGURES}"

. 
. * =============================================================================
. * I. Create summary statistics of dropout rates in the sample
. * =============================================================================
. use "/Users/wernerd/Desktop/Daniel Werner/final_indiv.dta", clear

. 
. keep id year month primary secondary high sex dropout school

. 
. destring year month, replace
year: all characters numeric; replaced as int
month: all characters numeric; replaced as byte

. 
. gsort id year month

. 
. * First, identify who started the panel in school and who dropped out
. 
. * For each person, get their first observation
. bysort id: gen first_obs = (_n == 1)

. 
. * Check if they started in school
. bysort id: gen started_in_school = (school[1] == 1)

. 
. * Check if they ever dropped out (assuming dropout is an indicator)
. bysort id: egen ever_dropout = max(dropout)

. 
. * Keep only one observation per person
. keep if first_obs == 1
(2,331,809 observations deleted)

. 
. * Now calculate statistics by school level and sex
. * Create a combined dataset with all the breakdowns
. 
. preserve

. 
. * Primary School (6-12)
. keep if primary == 1
(345,737 observations deleted)

. 
. * Total for primary
. count
  325,932

. local prim_total = r(N)

. count if started_in_school == 1
  322,252

. local prim_started = r(N)

. count if ever_dropout == 1
  3,311

. local prim_dropouts = r(N)

. local prim_rate = (`prim_dropouts' / `prim_started') * 100

. 
. * Men in primary
. count if sex == 1
  166,880

. local prim_men_total = r(N)

. count if sex == 1 & started_in_school == 1
  164,887

. local prim_men_started = r(N)

. count if sex == 1 & ever_dropout == 1
  1,789

. local prim_men_dropouts = r(N)

. local prim_men_rate = (`prim_men_dropouts' / `prim_men_started') * 100

. 
. * Women in primary
. count if sex == 2
  159,052

. local prim_women_total = r(N)

. count if sex == 2 & started_in_school == 1
  157,365

. local prim_women_started = r(N)

. count if sex == 2 & ever_dropout == 1
  1,522

. local prim_women_dropouts = r(N)

. local prim_women_rate = (`prim_women_dropouts' / `prim_women_started') * 100

. 
. restore

. 
. * Repeat for Secondary and High School
. preserve

. keep if secondary == 1
(521,296 observations deleted)

. 
. count
  150,373

. local sec_total = r(N)

. count if started_in_school == 1
  143,608

. local sec_started = r(N)

. count if ever_dropout == 1
  7,377

. local sec_dropouts = r(N)

. local sec_rate = (`sec_dropouts' / `sec_started') * 100

. 
. count if sex == 1
  76,777

. local sec_men_total = r(N)

. count if sex == 1 & started_in_school == 1
  72,876

. local sec_men_started = r(N)

. count if sex == 1 & ever_dropout == 1
  4,249

. local sec_men_dropouts = r(N)

. local sec_men_rate = (`sec_men_dropouts' / `sec_men_started') * 100

. 
. count if sex == 2
  73,596

. local sec_women_total = r(N)

. count if sex == 2 & started_in_school == 1
  70,732

. local sec_women_started = r(N)

. count if sex == 2 & ever_dropout == 1
  3,128

. local sec_women_dropouts = r(N)

. local sec_women_rate = (`sec_women_dropouts' / `sec_women_started') * 100

. 
. restore

. 
. * High School
. preserve

. keep if high == 1
(476,305 observations deleted)

. 
. count
  195,364

. local high_total = r(N)

. count if started_in_school == 1
  144,725

. local high_started = r(N)

. count if ever_dropout == 1
  15,427

. local high_dropouts = r(N)

. local high_rate = (`high_dropouts' / `high_started') * 100

. 
. count if sex == 1
  101,818

. local high_men_total = r(N)

. count if sex == 1 & started_in_school == 1
  73,607

. local high_men_started = r(N)

. count if sex == 1 & ever_dropout == 1
  8,813

. local high_men_dropouts = r(N)

. local high_men_rate = (`high_men_dropouts' / `high_men_started') * 100

. 
. count if sex == 2
  93,546

. local high_women_total = r(N)

. count if sex == 2 & started_in_school == 1
  71,118

. local high_women_started = r(N)

. count if sex == 2 & ever_dropout == 1
  6,614

. local high_women_dropouts = r(N)

. local high_women_rate = (`high_women_dropouts' / `high_women_started') * 100

. 
. restore

. 
. * Overall totals
. count
  671,669

. local total_total = r(N)

. count if started_in_school == 1
  610,585

. local total_started = r(N)

. count if ever_dropout == 1
  26,115

. local total_dropouts = r(N)

. local total_rate = (`total_dropouts' / `total_started') * 100

. 
. count if sex == 1
  345,475

. local total_men_total = r(N)

. count if sex == 1 & started_in_school == 1
  311,370

. local total_men_started = r(N)

. count if sex == 1 & ever_dropout == 1
  14,851

. local total_men_dropouts = r(N)

. local total_men_rate = (`total_men_dropouts' / `total_men_started') * 100

. 
. count if sex == 2
  326,194

. local total_women_total = r(N)

. count if sex == 2 & started_in_school == 1
  299,215

. local total_women_started = r(N)

. count if sex == 2 & ever_dropout == 1
  11,264

. local total_women_dropouts = r(N)

. local total_women_rate = (`total_women_dropouts' / `total_women_started') * 100

. 
. * Write the LaTeX table
. file open mytable using "${TABLES}dropout_stats.tex", write replace
(file ../output/Tables/dropout_stats.tex not found)

. 
. file write mytable "\begin{tabular}{llrrrl}" _n

. file write mytable "\toprule" _n

. file write mytable "Age Group & Category & Total People & Started Panel In School & Dropouts & Dropout Rate\\" _n

. file write mytable "\midrule" _n

. 
. * Primary School
. file write mytable "Primary School (6-12) & Total & " %12.0fc (`prim_total') " & " %12.0fc (`prim_started') " & " %12.0fc (`prim_dropouts'
> ) " & " %5.3f (`prim_rate') "\%\\" _n

. file write mytable " & \hspace{1em}\textit{Men} & " %12.0fc (`prim_men_total') " & " %12.0fc (`prim_men_started') " & " %12.0fc (`prim_men
> _dropouts') " & " %5.3f (`prim_men_rate') "\%\\" _n

. file write mytable " & \hspace{1em}\textit{Women} & " %12.0fc (`prim_women_total') " & " %12.0fc (`prim_women_started') " & " %12.0fc (`pr
> im_women_dropouts') " & " %5.3f (`prim_women_rate') "\%\\" _n

. 
. * Secondary School
. file write mytable "Secondary School (12-15) & Total & " %12.0fc (`sec_total') " & " %12.0fc (`sec_started') " & " %12.0fc (`sec_dropouts'
> ) " & " %5.3f (`sec_rate') "\%\\" _n

. file write mytable " & \hspace{1em}\textit{Men} & " %12.0fc (`sec_men_total') " & " %12.0fc (`sec_men_started') " & " %12.0fc (`sec_men_dr
> opouts') " & " %5.3f (`sec_men_rate') "\%\\" _n

. file write mytable " & \hspace{1em}\textit{Women} & " %12.0fc (`sec_women_total') " & " %12.0fc (`sec_women_started') " & " %12.0fc (`sec_
> women_dropouts') " & " %5.3f (`sec_women_rate') "\%\\" _n

. 
. * High School
. file write mytable "High School (15-18) & Total & " %12.0fc (`high_total') " & " %12.0fc (`high_started') " & " %12.0fc (`high_dropouts') 
> " & " %5.3f (`high_rate') "\%\\" _n

. file write mytable " & \hspace{1em}\textit{Men} & " %12.0fc (`high_men_total') " & " %12.0fc (`high_men_started') " & " %12.0fc (`high_men
> _dropouts') " & " %5.3f (`high_men_rate') "\%\\" _n

. file write mytable " & \hspace{1em}\textit{Women} & " %12.0fc (`high_women_total') " & " %12.0fc (`high_women_started') " & " %12.0fc (`hi
> gh_women_dropouts') " & " %5.3f (`high_women_rate') "\%\\" _n

. 
. * Total
. file write mytable "Total & Total & " %12.0fc (`total_total') " & " %12.0fc (`total_started') " & " %12.0fc (`total_dropouts') " & " %5.3f
>  (`total_rate') "\%\\" _n

. file write mytable " & \hspace{1em}\textit{Men} & " %12.0fc (`total_men_total') " & " %12.0fc (`total_men_started') " & " %12.0fc (`total_
> men_dropouts') " & " %5.3f (`total_men_rate') "\%\\" _n

. file write mytable " & \hspace{1em}\textit{Women} & " %12.0fc (`total_women_total') " & " %12.0fc (`total_women_started') " & " %12.0fc (`
> total_women_dropouts') " & " %5.3f (`total_women_rate') "\%\\" _n

. 
. file write mytable "\bottomrule" _n

. file write mytable "\end{tabular}" _n

. 
. file close mytable

. 
. 
. * =============================================================================
. * II. Create summary statistics at municipal level
. * =============================================================================
. use "/Users/wernerd/Desktop/Daniel Werner/final_mun.dta", clear

. 
. drop if pop_tot < 50000
(156,351 observations deleted)

. 
. destring municipality year month, replace 
municipality: all characters numeric; replaced as int
year: all characters numeric; replaced as int
month: all characters numeric; replaced as byte

. 
. keep avg_weekly_hours_worked_workers unemployment_rate avg_age avg_income_earners ///
>      avg_income_usd_earners avg_years_schooling avg_hh_size avg_hh_income ///
>      avg_hh_income_usd avg_hh_employment_rate municipality year month

. 
. * Create time period variable
. gen year_month = ym(year, month)

. format year_month %tm

. 
. gen Period = ""
(61,607 missing values generated)

. replace Period = "Calderón's War on Drugs" if year_month >= ym(2007,1) & year_month <= ym(2012,12)
variable Period was str1 now str24
(12,747 real changes made)

. replace Period = "Intermediate Period" if year_month >= ym(2013,1) & year_month <= ym(2016,12)
(17,596 real changes made)

. replace Period = "Respike" if year_month >= ym(2017,1) & year_month <= ym(2024,12)
(31,264 real changes made)

. 
. * Shorten variable names first
. rename avg_weekly_hours_worked_workers weekly_hrs

. rename unemployment_rate unemp_rate

. rename avg_income_earners income

. rename avg_income_usd_earners income_usd

. rename avg_years_schooling years_school

. rename avg_hh_size hh_size

. rename avg_hh_income hh_income

. rename avg_hh_income_usd hh_income_usd

. rename avg_hh_employment_rate hh_emp_rate

. 
. * Then use the shortened names in your collapse and formatting
. preserve

. collapse (mean) weekly_hrs unemp_rate avg_age income income_usd ///
>          years_school hh_size hh_income hh_income_usd hh_emp_rate, ///
>          by(municipality Period)

. 
. collapse (mean) weekly_hrs unemp_rate avg_age income income_usd ///
>          years_school hh_size hh_income hh_income_usd hh_emp_rate, ///
>          by(Period)

. 
. tempfile period_stats

. save `period_stats'
file /var/folders/r_/70svtsrx2k563rzqwg09prpw0000gn/T//S_18974.000005 saved as .dta format

. restore

. 
. * Get overall stats
. preserve

. collapse (mean) weekly_hrs unemp_rate avg_age income income_usd ///
>          years_school hh_size hh_income hh_income_usd hh_emp_rate, ///
>          by(municipality)

. 
. collapse (mean) weekly_hrs unemp_rate avg_age income income_usd ///
>          years_school hh_size hh_income hh_income_usd hh_emp_rate

. 
. * Store overall means
. local overall_hrs = weekly_hrs

. local overall_unemp = unemp_rate

. local overall_age = avg_age

. local overall_income = income

. local overall_income_usd = income_usd

. local overall_school = years_school

. local overall_hhsize = hh_size

. local overall_hhinc = hh_income

. local overall_hhinc_usd = hh_income_usd

. local overall_hhemp = hh_emp_rate

. 
. restore

. 
. * Load period stats and add overall
. use `period_stats', clear

. set obs `=_N+1'
Number of observations (_N) was 3, now 4.

. replace Period = "Overall" in `=_N'
(1 real change made)

. replace weekly_hrs = `overall_hrs' in `=_N'
(1 real change made)

. replace unemp_rate = `overall_unemp' in `=_N'
(1 real change made)

. replace avg_age = `overall_age' in `=_N'
(1 real change made)

. replace income = `overall_income' in `=_N'
(1 real change made)

. replace income_usd = `overall_income_usd' in `=_N'
(1 real change made)

. replace years_school = `overall_school' in `=_N'
(1 real change made)

. replace hh_size = `overall_hhsize' in `=_N'
(1 real change made)

. replace hh_income = `overall_hhinc' in `=_N'
(1 real change made)

. replace hh_income_usd = `overall_hhinc_usd' in `=_N'
(1 real change made)

. replace hh_emp_rate = `overall_hhemp' in `=_N'
(1 real change made)

. 
. * Order periods
. gen order = .
(4 missing values generated)

. replace order = 1 if Period == "Overall"
(1 real change made)

. replace order = 2 if Period == "Calderón's War on Drugs"
(1 real change made)

. replace order = 3 if Period == "Intermediate Period"
(1 real change made)

. replace order = 4 if Period == "Respike"
(1 real change made)

. sort order

. 
. * Format variables for display
. local hrs_1 : display %6.2f weekly_hrs[1]

. local hrs_2 : display %6.2f weekly_hrs[2]

. local hrs_3 : display %6.2f weekly_hrs[3]

. local hrs_4 : display %6.2f weekly_hrs[4]

. 
. local unemp_1 : display %6.2f unemp_rate[1]

. local unemp_2 : display %6.2f unemp_rate[2]

. local unemp_3 : display %6.2f unemp_rate[3]

. local unemp_4 : display %6.2f unemp_rate[4]

. 
. local age_1 : display %6.2f avg_age[1]

. local age_2 : display %6.2f avg_age[2]

. local age_3 : display %6.2f avg_age[3]

. local age_4 : display %6.2f avg_age[4]

. 
. local inc_1 : display %6.2f income[1]

. local inc_2 : display %6.2f income[2]

. local inc_3 : display %6.2f income[3]

. local inc_4 : display %6.2f income[4]

. 
. local incusd_1 : display %6.2f income_usd[1]

. local incusd_2 : display %6.2f income_usd[2]

. local incusd_3 : display %6.2f income_usd[3]

. local incusd_4 : display %6.2f income_usd[4]

. 
. local school_1 : display %6.2f years_school[1]

. local school_2 : display %6.2f years_school[2]

. local school_3 : display %6.2f years_school[3]

. local school_4 : display %6.2f years_school[4]

. 
. local hhsize_1 : display %6.2f hh_size[1]

. local hhsize_2 : display %6.2f hh_size[2]

. local hhsize_3 : display %6.2f hh_size[3]

. local hhsize_4 : display %6.2f hh_size[4]

. 
. local hhinc_1 : display %6.2f hh_income[1]

. local hhinc_2 : display %6.2f hh_income[2]

. local hhinc_3 : display %6.2f hh_income[3]

. local hhinc_4 : display %6.2f hh_income[4]

. 
. local hhincusd_1 : display %6.2f hh_income_usd[1]

. local hhincusd_2 : display %6.2f hh_income_usd[2]

. local hhincusd_3 : display %6.2f hh_income_usd[3]

. local hhincusd_4 : display %6.2f hh_income_usd[4]

. 
. local hhemp_1 : display %6.2f hh_emp_rate[1]

. local hhemp_2 : display %6.2f hh_emp_rate[2]

. local hhemp_3 : display %6.2f hh_emp_rate[3]

. local hhemp_4 : display %6.2f hh_emp_rate[4]

. 
. * Write LaTeX table
. file open mytable using "${TABLES}mun_summary_stats.tex", write replace
(file ../output/Tables/mun_summary_stats.tex not found)

. 
. file write mytable "\begin{tabular}{l c c c c}" _n

. file write mytable "\hline" _n

. file write mytable " & \shortstack{Full sample \\ (2007-2024)} & \shortstack{War on drugs \\ (2007-2012)} & \shortstack{Interim \\ (2013-2
> 016)} & \shortstack{Resurgence \\ (2017-2024)} \\" _n

. file write mytable "\hline" _n

. 
. file write mytable "Avg. weekly hours (workers)" _n

. file write mytable " & `hrs_1' & `hrs_2' & `hrs_3' & `hrs_4' \\" _n

. 
. file write mytable "Unemployment rate" _n

. file write mytable " & `unemp_1' & `unemp_2' & `unemp_3' & `unemp_4' \\" _n

. 
. file write mytable "Avg. age" _n

. file write mytable " & `age_1' & `age_2' & `age_3' & `age_4' \\" _n

. 
. file write mytable "Avg. income (earners)" _n

. file write mytable " & `inc_1' & `inc_2' & `inc_3' & `inc_4' \\" _n

. file write mytable " & (`incusd_1') & (`incusd_2') & (`incusd_3') & (`incusd_4') \\" _n

. 
. file write mytable "Avg. years schooling" _n

. file write mytable " & `school_1' & `school_2' & `school_3' & `school_4' \\" _n

. 
. file write mytable "Avg. household size" _n

. file write mytable " & `hhsize_1' & `hhsize_2' & `hhsize_3' & `hhsize_4' \\" _n

. 
. file write mytable "Avg. household income" _n

. file write mytable " & `hhinc_1' & `hhinc_2' & `hhinc_3' & `hhinc_4' \\" _n

. file write mytable " & (`hhincusd_1') & (`hhincusd_2') & (`hhincusd_3') & (`hhincusd_4') \\" _n

. 
. file write mytable "Avg. HH employment rate" _n

. file write mytable " & `hhemp_1' & `hhemp_2' & `hhemp_3' & `hhemp_4' \\" _n

. 
. file write mytable "\hline" _n

. file write mytable "\end{tabular}" _n

. 
. file close mytable

. 
end of do-file

The following files were created in enoe.do:
dropout_stats.tex 

Script main_results.do in StataMP started at 2026-02-04 17:16:47
Script main_results.do finished successfully at 2026-02-04 17:20:52
Output:

  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 19.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2025 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Unlimited-user 4-core network, expiring 21 Jul 2026
Serial number: 501909302705
  Licensed to: Daniel Werner
               Stanford

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased; see help set_maxvar.

. do main_results.do 

. *******************************************************************************
. * This script runs the main IV analysis for the paper and produces the  
. * regression tables found in the body and appendix of the paper 
. * 
. * Author: Daniel Werner 
. *******************************************************************************
. 
. clear all

. set more off

. set seed 2042023

. 
. * -----------------------------
. * 0) Set paths and create folders
. * -----------------------------
. global TABLES  "../output/Tables/"

. global FIGURES "../output/Figures/"

. capture mkdir "${TABLES}"

. capture mkdir "${FIGURES}"

. 
. 
. 
. use "/Users/wernerd/Desktop/Daniel Werner/final_indiv.dta", clear 

. 
. * -----------------------------------------------------------------------------
. * GRAB THE MUNICIPAL DATA AND BRING IN THE MUNICIPAL LEVEL CONTROLS 
. * -----------------------------------------------------------------------------
. 
. tempfile indiv_temp

. save `indiv_temp', replace
(file /var/folders/r_/70svtsrx2k563rzqwg09prpw0000gn/T//S_19013.000001 not found)
file /var/folders/r_/70svtsrx2k563rzqwg09prpw0000gn/T//S_19013.000001 saved as .dta format

. 
. * Load the municipal-level dataset
. use "/Users/wernerd/Desktop/Daniel Werner/final_mun.dta", clear

.  
. * Keep only the variables you need from municipal data
. keep municipality year month avg_* employment_rate

. 
. * Save as temporary file
. tempfile muni_temp

. save `muni_temp', replace
(file /var/folders/r_/70svtsrx2k563rzqwg09prpw0000gn/T//S_19013.000002 not found)
file /var/folders/r_/70svtsrx2k563rzqwg09prpw0000gn/T//S_19013.000002 saved as .dta format

. 
. * Reload individual data
. use `indiv_temp', clear

. 
. * Merge with municipal data
. merge m:1 municipality year month using `muni_temp'

    Result                      Number of obs
    -----------------------------------------
    Not matched                       144,360
        from master                         0  (_merge==1)
        from using                    144,360  (_merge==2)

    Matched                         3,003,478  (_merge==3)
    -----------------------------------------

. 
. 
. * Drop remaining unmerged and low population municipalities
. drop if pop_tot < 50000
(575,151 observations deleted)

. drop if _merge != 3
(144,360 observations deleted)

. cap drop _merge

. 
. * Drop primary school children
. drop if age >= 6 & age <=11
(1,081,529 observations deleted)

. 
. * -----------------------------------------------------------------------------
. * 2) Generate necessary variables
. * -----------------------------------------------------------------------------
. 
. * Instrument 
. gen iv = cs_big * d_to_pc

. 
. * Treatment
. gen ln_homicide = log(1+hr)

. 
. 
. * Controls
. destring municipality, replace 
municipality: all characters numeric; replaced as int

. gen month_year_date = date(year_month, "YM")

. format month_year_date %tm

. gen ln_hom_lag1 = log(1+hr_lag1)

. gen ln_hom_lag2 = log(1+hr_lag2)

. gen ln_hom_lag3 = log(1+hr_lag3)

. 
. 
. * -----------------------------------------------------------------------------
. * 3) Main Specification
. * -----------------------------------------------------------------------------
. 
. * OLS
. reghdfe dropout ln_homicide hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student, /// 
>         absorb(i.month_year_date i.id) cluster(id) 
(dropped 28130 singleton observations)
(MWFE estimator converged in 43 iterations)

HDFE Linear regression                            Number of obs   =  1,235,035
Absorbing 2 HDFE groups                           F(  26, 282608) =      15.20
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.2317
                                                  Adj R-squared   =     0.0035
                                                  Within R-sq.    =     0.0005
Number of clusters (id)      =    282,609         Root MSE        =     0.1188

                                                  (Std. err. adjusted for 282,609 clusters in id)
-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |   .0003402    .001291     0.26   0.792    -.0021901    .0028706
                      hh_income |  -2.21e-08   1.21e-08    -1.82   0.068    -4.60e-08    1.66e-09
             hh_adult_schooling |   .0037992   .0004767     7.97   0.000     .0028648    .0047336
                 hh_adult_hours |   4.23e-06   .0000106     0.40   0.690    -.0000166     .000025
       hh_adult_employment_rate |   -.008195   .0020589    -3.98   0.000    -.0122303   -.0041596
           hh_n_employed_adults |   .0067422   .0007479     9.02   0.000     .0052764     .008208
            hh_n_other_children |   .0033092   .0007454     4.44   0.000     .0018482    .0047703
                    hh_children |  -.0021842   .0006888    -3.17   0.002    -.0035343   -.0008342
                    ln_hom_lag1 |   .0006684    .001249     0.54   0.593    -.0017796    .0031164
                    ln_hom_lag2 |   .0007677   .0012186     0.63   0.529    -.0016207    .0031561
                    ln_hom_lag3 |  -.0009851    .001176    -0.84   0.402      -.00329    .0013198
                        pop_tot |   7.73e-08   2.97e-08     2.61   0.009     1.92e-08    1.35e-07
                    pct_pop_fem |    170.871   139.9644     1.22   0.222    -103.4553    445.1973
                        avg_age |   .0001486   .0001716     0.87   0.386    -.0001878     .000485
             avg_hh_adult_hours |  -.0006183   .0001097    -5.64   0.000    -.0008332   -.0004033
         avg_hh_adult_schooling |  -.0002833     .00041    -0.69   0.490    -.0010868    .0005202
                avg_hh_children |   .0019127   .0019532     0.98   0.327    -.0019156    .0057409
                     avg_income |  -4.93e-07   5.29e-07    -0.93   0.351    -1.53e-06    5.44e-07
                    avg_hincome |   .0000578   .0000654     0.88   0.377    -.0000703     .000186
                employment_rate |  -.0210074   .0067051    -3.13   0.002    -.0341491   -.0078657
       avg_hh_n_employed_adults |  -.0093344   .0022744    -4.10   0.000    -.0137921   -.0048767
                    avg_hh_size |    .003812   .0015333     2.49   0.013     .0008068    .0068172
        avg_weekly_hours_worked |   .0015666   .0002249     6.97   0.000     .0011259    .0020073
avg_weekly_hours_worked_workers |  -.0000629   .0001174    -0.54   0.592     -.000293    .0001671
                   pct_pop_male |   171.4049   140.0004     1.22   0.221    -102.9921    445.8019
                pct_pop_student |  -.4446117   .2770344    -1.60   0.109    -.9875915    .0983682
                          _cons |  -171.0677    139.982    -1.22   0.222    -445.4285    103.2931
-------------------------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |       166           1         165     |
              id |    282609      282609           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. local b_1 = _b[ln_homicide]

. local se_1 = _se[ln_homicide]

. local N_1 = e(N)

. quietly sum school if e(sample)

. local mean_1 : display %6.3f r(mean)

. 
. * IV minimal controls 
. ivreghdfe dropout ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot ///
>                   (ln_homicide = iv), /// 
>           absorb(i.month_year_date i.id) cluster(id) first
(dropped 24878 singleton observations)
(MWFE estimator converged in 43 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                1321920
Number of clusters (id) =       293791
------------------------------------------------------------------------------
             |               Robust
 ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
          iv |  -9.33e-07   7.78e-08   -11.99   0.000    -1.08e-06   -7.80e-07
 ln_hom_lag1 |    .217713   .0024356    89.39   0.000     .2129394    .2224867
 ln_hom_lag2 |   .0233076   .0018443    12.64   0.000     .0196929    .0269223
 ln_hom_lag3 |  -.0717624   .0016675   -43.04   0.000    -.0750307   -.0684941
     pop_tot |   1.77e-07   2.24e-08     7.89   0.000     1.33e-07    2.20e-07
------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1,293790) =   143.78
  Prob > F      =   0.0000
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1,293790) =   143.78
  Prob > F      =   0.0000



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1,293790)  P-val | SW Chi-sq(  1) P-val | SW F(  1,293790)
ln_homicide  |     143.78    0.0000 |      143.80   0.0000 |      143.78

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=143.71   P-val=0.0000

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                     186.70
Kleibergen-Paap Wald rk F statistic                               143.78

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,293790)=    1.05     P-val=0.3057
Anderson-Rubin Wald test           Chi-sq(1)=      1.05     P-val=0.3057
Stock-Wright LM S statistic        Chi-sq(1)=      1.05     P-val=0.3056

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =     293791
Number of observations               N  =    1321920
Number of regressors                 K  =          5
Number of endogenous regressors      K1 =          1
Number of instruments                L  =          5
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =       293791                Number of obs =  1321920
                                                      F(  5,293790) =     2.29
                                                      Prob > F      =   0.0434
Total (centered) SS     =  14570.27492                Centered R2   =  -0.0068
Total (uncentered) SS   =  14570.27492                Uncentered R2 =  -0.0068
Residual SS             =  14668.80347                Root MSE      =    .1053

------------------------------------------------------------------------------
             |               Robust
     dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
 ln_homicide |   .1003254    .098275     1.02   0.307    -.0922908    .2929416
 ln_hom_lag1 |  -.0213221   .0214438    -0.99   0.320    -.0633514    .0207072
 ln_hom_lag2 |  -.0007591   .0025796    -0.29   0.769    -.0058151    .0042968
 ln_hom_lag3 |   .0057507   .0071336     0.81   0.420     -.008231    .0197323
     pop_tot |   5.71e-08   3.23e-08     1.77   0.077    -6.20e-09    1.20e-07
------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):            143.715
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              186.696
                         (Kleibergen-Paap rk Wald F statistic):        143.776
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |       166           1         165     |
              id |    293791      293791           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

.                   
. local b_2 = _b[ln_homicide]

. local se_2 = _se[ln_homicide]

. local N_2 = e(N)

. local kp_2 = e(rkf)

. quietly sum school if e(sample)

. local mean_2 : display %6.3f r(mean)

. 
. * IV main specification 
. ivreghdfe dropout hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student (ln_homicide = iv), /// 
>         absorb(i.month_year_date i.id) cluster(id) first
(dropped 28130 singleton observations)
(MWFE estimator converged in 43 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                1235035
Number of clusters (id) =       282609
-------------------------------------------------------------------------------------------------
                                |               Robust
                    ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                             iv |  -9.42e-07   7.99e-08   -11.80   0.000    -1.10e-06   -7.86e-07
                      hh_income |   1.32e-08   1.16e-08     1.13   0.257    -9.61e-09    3.60e-08
             hh_adult_schooling |   .0006979   .0004237     1.65   0.100    -.0001325    .0015283
                 hh_adult_hours |  -8.32e-06   8.68e-06    -0.96   0.338    -.0000253    8.69e-06
       hh_adult_employment_rate |   .0043467   .0016839     2.58   0.010     .0010463    .0076471
           hh_n_employed_adults |  -.0013748   .0005764    -2.38   0.017    -.0025046    -.000245
            hh_n_other_children |  -.0010817   .0006385    -1.69   0.090    -.0023332    .0001697
                    hh_children |  -.0009698   .0005728    -1.69   0.090    -.0020926    .0001529
                    ln_hom_lag1 |   .2180808   .0025368    85.97   0.000     .2131088    .2230528
                    ln_hom_lag2 |   .0215292   .0019327    11.14   0.000     .0177411    .0253172
                    ln_hom_lag3 |  -.0729767   .0017357   -42.05   0.000    -.0763785   -.0695749
                        pop_tot |   1.28e-07   2.43e-08     5.26   0.000     8.01e-08    1.75e-07
                    pct_pop_fem |  -2024.652   613.3036    -3.30   0.001    -3226.707   -822.5983
                        avg_age |   .0008774   .0001759     4.99   0.000     .0005326    .0012223
             avg_hh_adult_hours |   .0004619   .0001091     4.23   0.000     .0002481    .0006757
         avg_hh_adult_schooling |   .0044661   .0004166    10.72   0.000     .0036496    .0052826
                avg_hh_children |   .0118894   .0021568     5.51   0.000     .0076622    .0161165
                     avg_income |  -2.03e-06   5.55e-07    -3.65   0.000    -3.12e-06   -9.41e-07
                    avg_hincome |  -.0002937   .0000782    -3.76   0.000    -.0004469   -.0001404
                employment_rate |   .0147822   .0064026     2.31   0.021     .0022334    .0273311
       avg_hh_n_employed_adults |  -.0034076   .0025705    -1.33   0.185    -.0084458    .0016306
                    avg_hh_size |   .0018418   .0016572     1.11   0.266    -.0014062    .0050898
        avg_weekly_hours_worked |   .0007725   .0002361     3.27   0.001     .0003098    .0012351
avg_weekly_hours_worked_workers |  -.0005923   .0001205    -4.92   0.000    -.0008285   -.0003561
                   pct_pop_male |  -2024.182   613.3113    -3.30   0.001    -3226.251   -822.1128
                pct_pop_student |  -2.876869   .2943469    -9.77   0.000    -3.453778   -2.299959
-------------------------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1,282608) =   139.27
  Prob > F      =   0.0000
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1,282608) =   139.27
  Prob > F      =   0.0000



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1,282608)  P-val | SW Chi-sq(  1) P-val | SW F(  1,282608)
ln_homicide  |     139.27    0.0000 |      139.29   0.0000 |      139.27

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=139.19   P-val=0.0000

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                     181.03
Kleibergen-Paap Wald rk F statistic                               139.27

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,282608)=    1.45     P-val=0.2286
Anderson-Rubin Wald test           Chi-sq(1)=      1.45     P-val=0.2286
Stock-Wright LM S statistic        Chi-sq(1)=      1.45     P-val=0.2282

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =     282609
Number of observations               N  =    1235035
Number of regressors                 K  =         26
Number of endogenous regressors      K1 =          1
Number of instruments                L  =         26
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =       282609                Number of obs =  1235035
                                                      F( 26,282608) =    15.11
                                                      Prob > F      =   0.0000
Total (centered) SS     =  13457.20289                Centered R2   =  -0.0093
Total (uncentered) SS   =  13457.20289                Uncentered R2 =  -0.0093
Residual SS             =  13582.79758                Root MSE      =    .1049

-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |   .1209581   .1009529     1.20   0.231    -.0769068    .3188229
                      hh_income |  -2.38e-08   1.23e-08    -1.93   0.054    -4.79e-08    3.69e-10
             hh_adult_schooling |   .0037149   .0004834     7.69   0.000     .0027675    .0046622
                 hh_adult_hours |   5.23e-06   .0000107     0.49   0.625    -.0000158    .0000262
       hh_adult_employment_rate |  -.0087204   .0021092    -4.13   0.000    -.0128543   -.0045865
           hh_n_employed_adults |   .0069083    .000762     9.07   0.000     .0054147    .0084018
            hh_n_other_children |   .0034396    .000758     4.54   0.000      .001954    .0049251
                    hh_children |  -.0020675   .0006981    -2.96   0.003    -.0034358   -.0006992
                    ln_hom_lag1 |  -.0256401   .0220718    -1.16   0.245    -.0689002      .01762
                    ln_hom_lag2 |   -.001833   .0024977    -0.73   0.463    -.0067283    .0030624
                    ln_hom_lag3 |   .0078016   .0074529     1.05   0.295    -.0068058     .022409
                        pop_tot |   6.19e-08   3.22e-08     1.92   0.055    -1.20e-09    1.25e-07
                    pct_pop_fem |   413.1704   244.5914     1.69   0.091    -66.22205    892.5629
                        avg_age |   .0000425   .0001942     0.22   0.827    -.0003381     .000423
             avg_hh_adult_hours |  -.0006732   .0001197    -5.62   0.000    -.0009078   -.0004386
         avg_hh_adult_schooling |  -.0008246   .0006153    -1.34   0.180    -.0020306    .0003814
                avg_hh_children |   .0004901   .0023001     0.21   0.831     -.004018    .0049982
                     avg_income |  -2.49e-07   5.76e-07    -0.43   0.666    -1.38e-06    8.80e-07
                    avg_hincome |   .0000935    .000072     1.30   0.194    -.0000476    .0002345
                employment_rate |  -.0228629   .0069427    -3.29   0.001    -.0364703   -.0092555
       avg_hh_n_employed_adults |   -.008929   .0023231    -3.84   0.000    -.0134823   -.0043757
                    avg_hh_size |   .0035895   .0015588     2.30   0.021     .0005344    .0066447
        avg_weekly_hours_worked |   .0014752   .0002388     6.18   0.000     .0010072    .0019432
avg_weekly_hours_worked_workers |   7.62e-06    .000132     0.06   0.954    -.0002512    .0002664
                   pct_pop_male |   413.6468   244.5714     1.69   0.091    -65.70631    892.9999
                pct_pop_student |  -.1026675   .4009848    -0.26   0.798    -.8885867    .6832517
-------------------------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):            139.194
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):              181.031
                         (Kleibergen-Paap rk Wald F statistic):        139.265
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: hh_income hh_adult_schooling hh_adult_hours
                      hh_adult_employment_rate hh_n_employed_adults
                      hh_n_other_children hh_children ln_hom_lag1 ln_hom_lag2
                      ln_hom_lag3 pop_tot pct_pop_fem avg_age avg_hh_adult_hours
                      avg_hh_adult_schooling avg_hh_children avg_income
                      avg_hincome employment_rate avg_hh_n_employed_adults
                      avg_hh_size avg_weekly_hours_worked
                      avg_weekly_hours_worked_workers pct_pop_male
                      pct_pop_student
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |       166           1         165     |
              id |    282609      282609           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. local b_3 = _b[ln_homicide]

. local se_3 = _se[ln_homicide]

. local N_3 = e(N)

. local kp_3 = e(rkf)

. quietly sum school if e(sample)

. local mean_3 : display %6.3f r(mean)

. 
. 
. * -----------------------------------------------------------------------------
. * 4) Time Periods
. * -----------------------------------------------------------------------------
. 
. destring year, replace
year: all characters numeric; replaced as int

. 
. * Period 1: 2007-2012
. preserve

. keep if year >= 2007 & year <= 2012
(977,687 observations deleted)

. 
. ivreghdfe dropout hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student (ln_homicide = iv), /// 
>         absorb(i.month_year_date i.id) cluster(id) first
(dropped 18690 singleton observations)
(MWFE estimator converged in 20 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                 327620
Number of clusters (id) =        85597
-------------------------------------------------------------------------------------------------
                                |               Robust
                    ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                             iv |  -4.64e-07   2.32e-07    -2.00   0.045    -9.19e-07   -9.44e-09
                      hh_income |   4.35e-08   3.08e-08     1.41   0.158    -1.69e-08    1.04e-07
             hh_adult_schooling |   .0029882   .0010014     2.98   0.003     .0010255     .004951
                 hh_adult_hours |  -3.49e-06   .0000197    -0.18   0.859     -.000042    .0000351
       hh_adult_employment_rate |    .005979   .0039881     1.50   0.134    -.0018376    .0137957
           hh_n_employed_adults |  -.0016564   .0013336    -1.24   0.214    -.0042702    .0009574
            hh_n_other_children |   .0018017   .0014689     1.23   0.220    -.0010774    .0046807
                    hh_children |  -.0030353    .001359    -2.23   0.026    -.0056989   -.0003716
                    ln_hom_lag1 |   .2373398   .0052502    45.21   0.000     .2270495      .24763
                    ln_hom_lag2 |   .0065146   .0037495     1.74   0.082    -.0008344    .0138636
                    ln_hom_lag3 |   -.130294   .0034148   -38.16   0.000    -.1369869    -.123601
                        pop_tot |  -2.02e-06   7.27e-08   -27.75   0.000    -2.16e-06   -1.87e-06
                    pct_pop_fem |  -6526.586    998.947    -6.53   0.000    -8484.493   -4568.678
                        avg_age |   .0025762   .0004612     5.59   0.000     .0016722    .0034802
             avg_hh_adult_hours |   .0009485   .0002332     4.07   0.000     .0004914    .0014056
         avg_hh_adult_schooling |   .0077483   .0010214     7.59   0.000     .0057463    .0097502
                avg_hh_children |   .0166407    .004678     3.56   0.000      .007472    .0258094
                     avg_income |   1.14e-06   1.41e-06     0.81   0.418    -1.62e-06    3.91e-06
                    avg_hincome |   .0001695   .0001976     0.86   0.391    -.0002177    .0005568
                employment_rate |   .0358124   .0131502     2.72   0.006     .0100383    .0615865
       avg_hh_n_employed_adults |   .0099562   .0052508     1.90   0.058    -.0003353    .0202477
                    avg_hh_size |   .0070267    .003542     1.98   0.047     .0000845    .0139689
        avg_weekly_hours_worked |   -.000837   .0005072    -1.65   0.099    -.0018311    .0001572
avg_weekly_hours_worked_workers |   -.000438   .0002753    -1.59   0.112    -.0009775    .0001015
                   pct_pop_male |  -6518.421   998.8405    -6.53   0.000    -8476.119   -4560.722
                pct_pop_student |  -4.639803   .8438458    -5.50   0.000    -6.293716   -2.985889
-------------------------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1, 85596) =     4.00
  Prob > F      =   0.0454
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1, 85596) =     4.00
  Prob > F      =   0.0454



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1, 85596)  P-val | SW Chi-sq(  1) P-val | SW F(  1, 85596)
ln_homicide  |       4.00    0.0454 |        4.00   0.0454 |        4.00

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=4.00     P-val=0.0456

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                       5.79
Kleibergen-Paap Wald rk F statistic                                 4.00

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,85596)=     1.90     P-val=0.1684
Anderson-Rubin Wald test           Chi-sq(1)=      1.90     P-val=0.1683
Stock-Wright LM S statistic        Chi-sq(1)=      1.91     P-val=0.1671

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =      85597
Number of observations               N  =     327620
Number of regressors                 K  =         26
Number of endogenous regressors      K1 =          1
Number of instruments                L  =         26
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =        85597                Number of obs =   327620
                                                      F( 26, 85596) =     3.84
                                                      Prob > F      =   0.0000
Total (centered) SS     =   3710.05666                Centered R2   =  -0.3617
Total (uncentered) SS   =   3710.05666                Uncentered R2 =  -0.3617
Residual SS             =   5051.91048                Root MSE      =    .1242

-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |   -.647955   .5697717    -1.14   0.255    -1.764703    .4687928
                      hh_income |  -1.27e-08   4.09e-08    -0.31   0.756    -9.29e-08    6.75e-08
             hh_adult_schooling |   .0071377   .0020782     3.43   0.001     .0030645    .0112108
                 hh_adult_hours |   3.49e-07   .0000253     0.01   0.989    -.0000493      .00005
       hh_adult_employment_rate |  -.0076775   .0062006    -1.24   0.216    -.0198307    .0044757
           hh_n_employed_adults |   .0069544   .0020512     3.39   0.001     .0029341    .0109747
            hh_n_other_children |   .0039839   .0020537     1.94   0.052    -.0000415    .0080092
                    hh_children |  -.0026689   .0024173    -1.10   0.270    -.0074069    .0020691
                    ln_hom_lag1 |   .1547157   .1356484     1.14   0.254    -.1111541    .4205854
                    ln_hom_lag2 |   .0020978   .0049671     0.42   0.673    -.0076377    .0118333
                    ln_hom_lag3 |  -.0844023   .0744274    -1.13   0.257    -.2302795    .0614749
                        pop_tot |  -1.15e-06   1.15e-06    -0.99   0.321    -3.41e-06    1.12e-06
                    pct_pop_fem |  -6025.999   3881.404    -1.55   0.121    -13633.52    1581.522
                        avg_age |   .0017674    .001564     1.13   0.258    -.0012981    .0048329
             avg_hh_adult_hours |   .0001192   .0006025     0.20   0.843    -.0010616       .0013
         avg_hh_adult_schooling |   .0054923   .0045934     1.20   0.232    -.0035107    .0144953
                avg_hh_children |   .0148578   .0112192     1.32   0.185    -.0071318    .0368473
                     avg_income |   2.94e-07   1.71e-06     0.17   0.864    -3.06e-06    3.65e-06
                    avg_hincome |   .0001364   .0002282     0.60   0.550    -.0003108    .0005836
                employment_rate |  -.0035074   .0258313    -0.14   0.892    -.0541365    .0471216
       avg_hh_n_employed_adults |   .0076615   .0087418     0.88   0.381    -.0094724    .0247954
                    avg_hh_size |   .0054387   .0059572     0.91   0.361    -.0062375    .0171148
        avg_weekly_hours_worked |   .0008046   .0007897     1.02   0.308    -.0007431    .0023524
avg_weekly_hours_worked_workers |  -.0003042   .0003898    -0.78   0.435    -.0010682    .0004598
                   pct_pop_male |  -6019.969   3876.929    -1.55   0.120    -13618.72    1578.779
                pct_pop_student |   -3.16641   2.776547    -1.14   0.254    -8.608418    2.275599
-------------------------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              3.996
                                                   Chi-sq(1) P-val =    0.0456
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                5.787
                         (Kleibergen-Paap rk Wald F statistic):          4.003
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: hh_income hh_adult_schooling hh_adult_hours
                      hh_adult_employment_rate hh_n_employed_adults
                      hh_n_other_children hh_children ln_hom_lag1 ln_hom_lag2
                      ln_hom_lag3 pop_tot pct_pop_fem avg_age avg_hh_adult_hours
                      avg_hh_adult_schooling avg_hh_children avg_income
                      avg_hincome employment_rate avg_hh_n_employed_adults
                      avg_hh_size avg_weekly_hours_worked
                      avg_weekly_hours_worked_workers pct_pop_male
                      pct_pop_student
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |        36           1          35     |
              id |     85597       85597           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. local b_4 = _b[ln_homicide]

. local se_4 = _se[ln_homicide]

. local N_4 = e(N)

. local kp_4 = e(rkf)

. quietly sum school if e(sample)

. local mean_4 : display %6.3f r(mean)

. 
. restore

. 
. * Period 2: 2013-2016
. preserve

. keep if year >= 2013 & year <= 2016
(872,326 observations deleted)

. 
. ivreghdfe dropout hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student (ln_homicide = iv), /// 
>         absorb(i.month_year_date i.id) cluster(id) first
(dropped 19325 singleton observations)
(MWFE estimator converged in 24 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                 425795
Number of clusters (id) =       106888
-------------------------------------------------------------------------------------------------
                                |               Robust
                    ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                             iv |  -3.23e-07   1.17e-07    -2.77   0.006    -5.52e-07   -9.48e-08
                      hh_income |   3.20e-09   1.48e-08     0.22   0.829    -2.59e-08    3.23e-08
             hh_adult_schooling |  -.0007972   .0006095    -1.31   0.191    -.0019918    .0003974
                 hh_adult_hours |   3.97e-07   .0000129     0.03   0.975    -.0000248    .0000256
       hh_adult_employment_rate |   .0059882   .0025967     2.31   0.021     .0008988    .0110777
           hh_n_employed_adults |  -.0018207   .0009023    -2.02   0.044    -.0035892   -.0000521
            hh_n_other_children |  -.0020421   .0009602    -2.13   0.033    -.0039241   -.0001602
                    hh_children |  -.0008237   .0008616    -0.96   0.339    -.0025124     .000865
                    ln_hom_lag1 |   .1595045   .0035105    45.44   0.000      .152624     .166385
                    ln_hom_lag2 |  -.0015976     .00304    -0.53   0.599    -.0075559    .0043607
                    ln_hom_lag3 |  -.0556536   .0028004   -19.87   0.000    -.0611422   -.0501649
                        pop_tot |   4.03e-07   3.53e-08    11.43   0.000     3.34e-07    4.73e-07
                    pct_pop_fem |   4004.917   762.0844     5.26   0.000     2511.254    5498.579
                        avg_age |   .0016395   .0002829     5.80   0.000     .0010851     .002194
             avg_hh_adult_hours |  -.0008144   .0001781    -4.57   0.000    -.0011635   -.0004654
         avg_hh_adult_schooling |   .0033964   .0006542     5.19   0.000     .0021141    .0046786
                avg_hh_children |   .0362558   .0033529    10.81   0.000     .0296843    .0428274
                     avg_income |  -1.21e-06   7.26e-07    -1.67   0.095    -2.64e-06    2.10e-07
                    avg_hincome |  -.0007218   .0000941    -7.67   0.000    -.0009064   -.0005373
                employment_rate |   .0433739   .0108693     3.99   0.000     .0220704    .0646775
       avg_hh_n_employed_adults |   .0012237   .0040252     0.30   0.761    -.0066655    .0091129
                    avg_hh_size |  -.0095735   .0026089    -3.67   0.000    -.0146869   -.0044602
        avg_weekly_hours_worked |    .000754   .0003762     2.00   0.045     .0000166    .0014914
avg_weekly_hours_worked_workers |   .0008745   .0002012     4.35   0.000     .0004802    .0012688
                   pct_pop_male |   3998.896   762.1838     5.25   0.000     2505.039    5492.753
                pct_pop_student |   1.974544   .4034116     4.89   0.000      1.18387    2.765219
-------------------------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1,106887) =     7.69
  Prob > F      =   0.0056
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1,106887) =     7.69
  Prob > F      =   0.0056



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1,106887)  P-val | SW Chi-sq(  1) P-val | SW F(  1,106887)
ln_homicide  |       7.69    0.0056 |        7.69   0.0055 |        7.69

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=7.69     P-val=0.0055

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                       9.66
Kleibergen-Paap Wald rk F statistic                                 7.69

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,106887)=    0.11     P-val=0.7386
Anderson-Rubin Wald test           Chi-sq(1)=      0.11     P-val=0.7386
Stock-Wright LM S statistic        Chi-sq(1)=      0.11     P-val=0.7376

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =     106888
Number of observations               N  =     425795
Number of regressors                 K  =         26
Number of endogenous regressors      K1 =          1
Number of instruments                L  =         26
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =       106888                Number of obs =   425795
                                                      F( 26,106887) =     4.15
                                                      Prob > F      =   0.0000
Total (centered) SS     =  4351.162254                Centered R2   =  -0.0135
Total (uncentered) SS   =  4351.162254                Uncentered R2 =  -0.0135
Residual SS             =  4410.105168                Root MSE      =    .1018

-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |   .1663732   .5024138     0.33   0.741    -.8183508    1.151097
                      hh_income |  -1.70e-08   1.88e-08    -0.90   0.366    -5.37e-08    1.98e-08
             hh_adult_schooling |   .0046275   .0009385     4.93   0.000      .002788    .0064669
                 hh_adult_hours |   9.78e-06   .0000182     0.54   0.590    -.0000258    .0000454
       hh_adult_employment_rate |   -.009352   .0047219    -1.98   0.048    -.0186069   -.0000972
           hh_n_employed_adults |   .0065099   .0016195     4.02   0.000     .0033357    .0096841
            hh_n_other_children |   .0028939    .001674     1.73   0.084     -.000387    .0061749
                    hh_children |  -.0002598   .0013289    -0.20   0.845    -.0028644    .0023448
                    ln_hom_lag1 |  -.0245608   .0802443    -0.31   0.760    -.1818385    .1327169
                    ln_hom_lag2 |   .0033819   .0026566     1.27   0.203    -.0018249    .0085887
                    ln_hom_lag3 |   .0073642   .0279751     0.26   0.792    -.0474665    .0621949
                        pop_tot |   1.55e-08   2.08e-07     0.07   0.941    -3.93e-07    4.24e-07
                    pct_pop_fem |   380.3649   2137.769     0.18   0.859    -3809.632    4570.362
                        avg_age |  -.0001573   .0008885    -0.18   0.860    -.0018988    .0015842
             avg_hh_adult_hours |  -.0004205   .0004594    -0.92   0.360     -.001321      .00048
         avg_hh_adult_schooling |  -.0005283   .0018659    -0.28   0.777    -.0041855    .0031289
                avg_hh_children |   -.005972   .0185934    -0.32   0.748    -.0424148    .0304707
                     avg_income |   1.14e-06   1.07e-06     1.06   0.288    -9.60e-07    3.23e-06
                    avg_hincome |   .0000212   .0003719     0.06   0.955    -.0007077      .00075
                employment_rate |  -.0223252   .0250678    -0.89   0.373    -.0714577    .0268074
       avg_hh_n_employed_adults |  -.0092919   .0048095    -1.93   0.053    -.0187185    .0001347
                    avg_hh_size |   .0077318   .0057213     1.35   0.177     -.003482    .0189455
        avg_weekly_hours_worked |   .0013241   .0005759     2.30   0.021     .0001954    .0024529
avg_weekly_hours_worked_workers |  -.0001847   .0005003    -0.37   0.712    -.0011652    .0007958
                   pct_pop_male |    381.385   2134.999     0.18   0.858    -3803.184    4565.954
                pct_pop_student |  -.4847507   1.135807    -0.43   0.670    -2.710916    1.741415
-------------------------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):              7.692
                                                   Chi-sq(1) P-val =    0.0055
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):                9.656
                         (Kleibergen-Paap rk Wald F statistic):          7.691
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: hh_income hh_adult_schooling hh_adult_hours
                      hh_adult_employment_rate hh_n_employed_adults
                      hh_n_other_children hh_children ln_hom_lag1 ln_hom_lag2
                      ln_hom_lag3 pop_tot pct_pop_fem avg_age avg_hh_adult_hours
                      avg_hh_adult_schooling avg_hh_children avg_income
                      avg_hincome employment_rate avg_hh_n_employed_adults
                      avg_hh_size avg_weekly_hours_worked
                      avg_weekly_hours_worked_workers pct_pop_male
                      pct_pop_student
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |        48           1          47     |
              id |    106888      106888           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. local b_5 = _b[ln_homicide]

. local se_5 = _se[ln_homicide]

. local N_5 = e(N)

. local kp_5 = e(rkf)

. quietly sum school if e(sample)

. local mean_5 : display %6.3f r(mean)

. 
. restore

. 
. * Period 3: 2017-2024
. preserve

. keep if year >= 2017 & year <= 2024
(843,583 observations deleted)

. 
. ivreghdfe dropout hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student (ln_homicide = iv), /// 
>         absorb(i.month_year_date i.id) cluster(id) first
(dropped 14260 singleton observations)
(MWFE estimator converged in 29 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                 457475
Number of clusters (id) =       107783
-------------------------------------------------------------------------------------------------
                                |               Robust
                    ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                             iv |  -9.88e-07   1.18e-07    -8.36   0.000    -1.22e-06   -7.56e-07
                      hh_income |   1.56e-08   2.14e-08     0.73   0.466    -2.64e-08    5.76e-08
             hh_adult_schooling |  -.0000272   .0007183    -0.04   0.970     -.001435    .0013806
                 hh_adult_hours |  -.0000129   .0000143    -0.90   0.370     -.000041    .0000152
       hh_adult_employment_rate |    .003488   .0025839     1.35   0.177    -.0015763    .0085524
           hh_n_employed_adults |   -.001283   .0008808    -1.46   0.145    -.0030095    .0004434
            hh_n_other_children |  -.0023942   .0010673    -2.24   0.025    -.0044862   -.0003022
                    hh_children |  -.0001779   .0009163    -0.19   0.846    -.0019739    .0016181
                    ln_hom_lag1 |   .2344759   .0036727    63.84   0.000     .2272775    .2416743
                    ln_hom_lag2 |   .0307245   .0030694    10.01   0.000     .0247086    .0367403
                    ln_hom_lag3 |  -.0690856   .0027519   -25.10   0.000    -.0744792   -.0636919
                        pop_tot |   3.21e-07   3.91e-08     8.22   0.000     2.45e-07    3.98e-07
                    pct_pop_fem |  -2169.593   661.1064    -3.28   0.001    -3465.341   -873.8444
                        avg_age |   .0001066   .0002581     0.41   0.680    -.0003993    .0006125
             avg_hh_adult_hours |   .0012711   .0001723     7.38   0.000     .0009334    .0016088
         avg_hh_adult_schooling |   .0047959   .0006656     7.21   0.000     .0034914    .0061004
                avg_hh_children |   .0012354   .0032526     0.38   0.704    -.0051396    .0076105
                     avg_income |  -4.19e-06   8.87e-07    -4.72   0.000    -5.92e-06   -2.45e-06
                    avg_hincome |   .0000245   .0001216     0.20   0.840    -.0002137    .0002628
                employment_rate |  -.0038251   .0103441    -0.37   0.712    -.0240992    .0164491
       avg_hh_n_employed_adults |  -.0112993   .0038564    -2.93   0.003    -.0188578   -.0037408
                    avg_hh_size |   .0061814    .002476     2.50   0.013     .0013286    .0110342
        avg_weekly_hours_worked |   .0015401   .0003558     4.33   0.000     .0008426    .0022375
avg_weekly_hours_worked_workers |  -.0017131    .000186    -9.21   0.000    -.0020777   -.0013485
                   pct_pop_male |  -2168.738   661.2074    -3.28   0.001    -3464.684   -872.7915
                pct_pop_student |  -3.318968   .4733074    -7.01   0.000    -4.246636     -2.3913
-------------------------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1,107782) =    69.88
  Prob > F      =   0.0000
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1,107782) =    69.88
  Prob > F      =   0.0000



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1,107782)  P-val | SW Chi-sq(  1) P-val | SW F(  1,107782)
ln_homicide  |      69.88    0.0000 |       69.90   0.0000 |       69.88

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=69.87    P-val=0.0000

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                      94.84
Kleibergen-Paap Wald rk F statistic                                69.88

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,107782)=    6.25     P-val=0.0124
Anderson-Rubin Wald test           Chi-sq(1)=      6.25     P-val=0.0124
Stock-Wright LM S statistic        Chi-sq(1)=      6.28     P-val=0.0122

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =     107783
Number of observations               N  =     457475
Number of regressors                 K  =         26
Number of endogenous regressors      K1 =          1
Number of instruments                L  =         26
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =       107783                Number of obs =   457475
                                                      F( 26,107782) =     6.74
                                                      Prob > F      =   0.0000
Total (centered) SS     =  4857.053607                Centered R2   =  -0.0887
Total (uncentered) SS   =  4857.053607                Uncentered R2 =  -0.0887
Residual SS             =  5288.069606                Root MSE      =    .1075

-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |   .3649539    .151802     2.40   0.016     .0674242    .6624837
                      hh_income |  -1.78e-08   2.54e-08    -0.70   0.485    -6.76e-08    3.21e-08
             hh_adult_schooling |   .0034454   .0008888     3.88   0.000     .0017034    .0051875
                 hh_adult_hours |   7.53e-06   .0000183     0.41   0.681    -.0000283    .0000434
       hh_adult_employment_rate |   -.007228   .0034138    -2.12   0.034     -.013919   -.0005369
           hh_n_employed_adults |   .0068658   .0012341     5.56   0.000     .0044469    .0092847
            hh_n_other_children |    .005289   .0013945     3.79   0.000     .0025559    .0080221
                    hh_children |  -.0049622   .0011848    -4.19   0.000    -.0072843     -.00264
                    ln_hom_lag1 |   -.085024     .03569    -2.38   0.017     -.154976   -.0150721
                    ln_hom_lag2 |  -.0074172   .0052114    -1.42   0.155    -.0176316    .0027971
                    ln_hom_lag3 |   .0234288   .0107323     2.18   0.029     .0023936     .044464
                        pop_tot |  -1.19e-07   6.83e-08    -1.74   0.082    -2.52e-07    1.52e-08
                    pct_pop_fem |   993.6253   404.2249     2.46   0.014     201.3502      1785.9
                        avg_age |   .0001252   .0002615     0.48   0.632    -.0003873    .0006377
             avg_hh_adult_hours |  -.0012405   .0002679    -4.63   0.000    -.0017655   -.0007154
         avg_hh_adult_schooling |  -.0021352   .0009916    -2.15   0.031    -.0040787   -.0001917
                avg_hh_children |   .0027004   .0030758     0.88   0.380    -.0033281    .0087289
                     avg_income |  -4.24e-07   1.16e-06    -0.37   0.714    -2.69e-06    1.84e-06
                    avg_hincome |   .0002043   .0001259     1.62   0.105    -.0000424     .000451
                employment_rate |  -.0213894   .0112325    -1.90   0.057     -.043405    .0006262
       avg_hh_n_employed_adults |  -.0097535   .0038303    -2.55   0.011    -.0172609   -.0022461
                    avg_hh_size |    .001751   .0025615     0.68   0.494    -.0032696    .0067716
        avg_weekly_hours_worked |   .0012402   .0004181     2.97   0.003     .0004208    .0020597
avg_weekly_hours_worked_workers |   .0006023   .0003245     1.86   0.063    -.0000336    .0012383
                   pct_pop_male |   993.9855   404.2224     2.46   0.014     201.7153    1786.256
                pct_pop_student |     .35128   .7174469     0.49   0.624    -1.054906    1.757466
-------------------------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             69.869
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               94.836
                         (Kleibergen-Paap rk Wald F statistic):         69.885
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: hh_income hh_adult_schooling hh_adult_hours
                      hh_adult_employment_rate hh_n_employed_adults
                      hh_n_other_children hh_children ln_hom_lag1 ln_hom_lag2
                      ln_hom_lag3 pop_tot pct_pop_fem avg_age avg_hh_adult_hours
                      avg_hh_adult_schooling avg_hh_children avg_income
                      avg_hincome employment_rate avg_hh_n_employed_adults
                      avg_hh_size avg_weekly_hours_worked
                      avg_weekly_hours_worked_workers pct_pop_male
                      pct_pop_student
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |        82           1          81     |
              id |    107783      107783           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. local b_6 = _b[ln_homicide]

. local se_6 = _se[ln_homicide]

. local N_6 = e(N)

. local kp_6 = e(rkf)

. quietly sum school if e(sample)

. local mean_6 : display %6.3f r(mean)

. 
. restore

. 
. * -----------------------------------------------------------------------------
. * 5) Schooling cohort heterogeneity
. * -----------------------------------------------------------------------------
. 
. * Middle School
. preserve

. keep if age >= 12 & age <=14
(771,863 observations deleted)

. ivreghdfe dropout hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student (ln_homicide = iv), /// 
>         absorb(i.month_year_date i.id) cluster(id) first
(dropped 23391 singleton observations)
(MWFE estimator converged in 43 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                 515714
Number of clusters (id) =       129703
-------------------------------------------------------------------------------------------------
                                |               Robust
                    ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                             iv |  -1.02e-06   1.27e-07    -8.07   0.000    -1.27e-06   -7.73e-07
                      hh_income |   5.73e-09   1.93e-08     0.30   0.766    -3.21e-08    4.36e-08
             hh_adult_schooling |   .0013181     .00109     1.21   0.227    -.0008183    .0034545
                 hh_adult_hours |  -7.60e-06   .0000135    -0.56   0.575    -.0000342    .0000189
       hh_adult_employment_rate |    .005242   .0028038     1.87   0.062    -.0002534    .0107374
           hh_n_employed_adults |  -.0020106   .0010163    -1.98   0.048    -.0040025   -.0000187
            hh_n_other_children |  -.0015031   .0011667    -1.29   0.198    -.0037897    .0007835
                    hh_children |  -.0002931   .0013041    -0.22   0.822    -.0028492    .0022629
                    ln_hom_lag1 |   .2141043   .0040479    52.89   0.000     .2061706    .2220381
                    ln_hom_lag2 |   .0249571   .0030825     8.10   0.000     .0189155    .0309987
                    ln_hom_lag3 |  -.0813594   .0027524   -29.56   0.000     -.086754   -.0759647
                        pop_tot |   1.01e-07   3.95e-08     2.57   0.010     2.40e-08    1.79e-07
                    pct_pop_fem |  -3208.177   786.1923    -4.08   0.000    -4749.089   -1667.265
                        avg_age |   .0008957   .0002746     3.26   0.001     .0003576    .0014339
             avg_hh_adult_hours |   .0006603   .0001695     3.90   0.000     .0003281    .0009925
         avg_hh_adult_schooling |   .0043277   .0006591     6.57   0.000     .0030358    .0056196
                avg_hh_children |   .0165635   .0031497     5.26   0.000     .0103902    .0227368
                     avg_income |  -1.96e-06   8.50e-07    -2.30   0.021    -3.62e-06   -2.93e-07
                    avg_hincome |   -.000347   .0001189    -2.92   0.004    -.0005799    -.000114
                employment_rate |     .00444   .0099201     0.45   0.654    -.0150031    .0238831
       avg_hh_n_employed_adults |    .001748   .0036819     0.47   0.635    -.0054684    .0089644
                    avg_hh_size |   -.002214   .0024151    -0.92   0.359    -.0069475    .0025196
        avg_weekly_hours_worked |   .0006095   .0003495     1.74   0.081    -.0000755    .0012946
avg_weekly_hours_worked_workers |  -.0006193   .0001866    -3.32   0.001     -.000985   -.0002536
                   pct_pop_male |   -3207.74   786.2119    -4.08   0.000    -4748.691    -1666.79
                pct_pop_student |  -3.201674    .484407    -6.61   0.000    -4.151096   -2.252251
-------------------------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1,129702) =    65.05
  Prob > F      =   0.0000
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1,129702) =    65.05
  Prob > F      =   0.0000



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1,129702)  P-val | SW Chi-sq(  1) P-val | SW F(  1,129702)
ln_homicide  |      65.05    0.0000 |       65.07   0.0000 |       65.05

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=65.06    P-val=0.0000

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                      87.37
Kleibergen-Paap Wald rk F statistic                                65.05

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,129702)=    4.59     P-val=0.0322
Anderson-Rubin Wald test           Chi-sq(1)=      4.59     P-val=0.0322
Stock-Wright LM S statistic        Chi-sq(1)=      4.63     P-val=0.0313

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =     129703
Number of observations               N  =     515714
Number of regressors                 K  =         26
Number of endogenous regressors      K1 =          1
Number of instruments                L  =         26
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =       129703                Number of obs =   515714
                                                      F( 26,129702) =     1.99
                                                      Prob > F      =   0.0019
Total (centered) SS     =  2499.678771                Centered R2   =  -0.0681
Total (uncentered) SS   =  2499.678771                Uncentered R2 =  -0.0681
Residual SS             =  2669.790757                Root MSE      =   .07196

-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |   .2144643   .1037224     2.07   0.039     .0111703    .4177583
                      hh_income |  -1.28e-08   1.15e-08    -1.11   0.266    -3.54e-08    9.80e-09
             hh_adult_schooling |   .0017175   .0008663     1.98   0.047     .0000196    .0034153
                 hh_adult_hours |  -5.21e-06    .000012    -0.43   0.664    -.0000287    .0000183
       hh_adult_employment_rate |  -.0035219   .0027919    -1.26   0.207     -.008994    .0019502
           hh_n_employed_adults |   .0025135   .0010809     2.33   0.020      .000395    .0046321
            hh_n_other_children |  -.0008152   .0010264    -0.79   0.427    -.0028268    .0011965
                    hh_children |   .0023548   .0012163     1.94   0.053    -.0000291    .0047387
                    ln_hom_lag1 |  -.0449109   .0222963    -2.01   0.044    -.0886111   -.0012106
                    ln_hom_lag2 |  -.0042691   .0029769    -1.43   0.152    -.0101037    .0015655
                    ln_hom_lag3 |    .017579   .0085547     2.05   0.040     .0008119     .034346
                        pop_tot |   3.90e-09   3.45e-08     0.11   0.910    -6.38e-08    7.16e-08
                    pct_pop_fem |   686.3855   388.0294     1.77   0.077    -74.14517    1446.916
                        avg_age |  -.0000484    .000217    -0.22   0.823    -.0004737    .0003768
             avg_hh_adult_hours |  -.0004795   .0001454    -3.30   0.001    -.0007645   -.0001945
         avg_hh_adult_schooling |  -.0016462   .0006741    -2.44   0.015    -.0029674    -.000325
                avg_hh_children |  -.0001001   .0029399    -0.03   0.973    -.0058622    .0056621
                     avg_income |   3.58e-07   6.11e-07     0.59   0.557    -8.38e-07    1.56e-06
                    avg_hincome |   .0000623    .000082     0.76   0.448    -.0000985    .0002231
                employment_rate |  -.0137811   .0075821    -1.82   0.069    -.0286419    .0010797
       avg_hh_n_employed_adults |  -.0026734   .0028443    -0.94   0.347    -.0082481    .0029014
                    avg_hh_size |   .0010581   .0019416     0.54   0.586    -.0027475    .0048637
        avg_weekly_hours_worked |   .0005947   .0002793     2.13   0.033     .0000473    .0011422
avg_weekly_hours_worked_workers |   .0001884   .0001459     1.29   0.197    -.0000976    .0004744
                   pct_pop_male |   686.2895    387.996     1.77   0.077    -74.17575    1446.755
                pct_pop_student |   .7744331    .469363     1.65   0.099    -.1455101    1.694376
-------------------------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             65.056
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               87.371
                         (Kleibergen-Paap rk Wald F statistic):         65.048
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: hh_income hh_adult_schooling hh_adult_hours
                      hh_adult_employment_rate hh_n_employed_adults
                      hh_n_other_children hh_children ln_hom_lag1 ln_hom_lag2
                      ln_hom_lag3 pop_tot pct_pop_fem avg_age avg_hh_adult_hours
                      avg_hh_adult_schooling avg_hh_children avg_income
                      avg_hincome employment_rate avg_hh_n_employed_adults
                      avg_hh_size avg_weekly_hours_worked
                      avg_weekly_hours_worked_workers pct_pop_male
                      pct_pop_student
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |       166           1         165     |
              id |    129703      129703           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

.                 
. local b_7 = _b[ln_homicide]

. local se_7 = _se[ln_homicide]

. local N_7 = e(N)

. local kp_7 = e(rkf)

. quietly sum school if e(sample)

. local mean_7 : display %6.3f r(mean)

. restore

. 
. * High School
. preserve

. keep if age >= 15 & age <=18
(574,935 observations deleted)

. ivreghdfe dropout hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student (ln_homicide = iv), /// 
>         absorb(i.month_year_date i.id) cluster(id) first
(dropped 24142 singleton observations)
(MWFE estimator converged in 43 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                 699918
Number of clusters (id) =       169371
-------------------------------------------------------------------------------------------------
                                |               Robust
                    ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                             iv |  -8.42e-07   1.06e-07    -7.94   0.000    -1.05e-06   -6.34e-07
                      hh_income |   1.96e-08   1.50e-08     1.31   0.190    -9.71e-09    4.90e-08
             hh_adult_schooling |   .0004644   .0004684     0.99   0.322    -.0004537    .0013825
                 hh_adult_hours |  -6.44e-06   .0000116    -0.55   0.579    -.0000292    .0000163
       hh_adult_employment_rate |   .0041725   .0022182     1.88   0.060    -.0001752    .0085202
           hh_n_employed_adults |  -.0012652   .0007311    -1.73   0.084    -.0026981    .0001676
            hh_n_other_children |  -.0012993   .0008929    -1.46   0.146    -.0030494    .0004509
                    hh_children |  -.0010584   .0006953    -1.52   0.128    -.0024212    .0003045
                    ln_hom_lag1 |   .2145682   .0033525    64.00   0.000     .2079974     .221139
                    ln_hom_lag2 |   .0185059   .0025725     7.19   0.000     .0134638     .023548
                    ln_hom_lag3 |  -.0758015   .0023357   -32.45   0.000    -.0803795   -.0712235
                        pop_tot |   1.59e-07   3.31e-08     4.80   0.000     9.39e-08    2.24e-07
                    pct_pop_fem |  -1806.707   807.5681    -2.24   0.025    -3389.514   -223.9001
                        avg_age |     .00095   .0002376     4.00   0.000     .0004843    .0014157
             avg_hh_adult_hours |   .0003596   .0001475     2.44   0.015     .0000706    .0006487
         avg_hh_adult_schooling |   .0043606   .0005615     7.77   0.000     .0032601    .0054612
                avg_hh_children |   .0090478   .0029806     3.04   0.002     .0032058    .0148897
                     avg_income |  -1.85e-06   7.50e-07    -2.47   0.013    -3.32e-06   -3.84e-07
                    avg_hincome |  -.0002912   .0001051    -2.77   0.006    -.0004971   -.0000852
                employment_rate |       .021   .0086717     2.42   0.015     .0040038    .0379962
       avg_hh_n_employed_adults |  -.0069217   .0036007    -1.92   0.055    -.0139789    .0001355
                    avg_hh_size |   .0050715   .0022978     2.21   0.027     .0005678    .0095752
        avg_weekly_hours_worked |   .0009927   .0003263     3.04   0.002     .0003531    .0016323
avg_weekly_hours_worked_workers |  -.0006623   .0001616    -4.10   0.000     -.000979   -.0003456
                   pct_pop_male |  -1806.204   807.5851    -2.24   0.025    -3389.045   -223.3637
                pct_pop_student |  -2.812846   .4024373    -6.99   0.000     -3.60161   -2.024082
-------------------------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1,169370) =    63.04
  Prob > F      =   0.0000
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1,169370) =    63.04
  Prob > F      =   0.0000



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1,169370)  P-val | SW Chi-sq(  1) P-val | SW F(  1,169370)
ln_homicide  |      63.04    0.0000 |       63.05   0.0000 |       63.04

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=63.01    P-val=0.0000

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                      83.12
Kleibergen-Paap Wald rk F statistic                                63.04

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,169370)=    0.12     P-val=0.7259
Anderson-Rubin Wald test           Chi-sq(1)=      0.12     P-val=0.7258
Stock-Wright LM S statistic        Chi-sq(1)=      0.12     P-val=0.7256

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =     169371
Number of observations               N  =     699918
Number of regressors                 K  =         26
Number of endogenous regressors      K1 =          1
Number of instruments                L  =         26
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =       169371                Number of obs =   699918
                                                      F( 26,169370) =    12.05
                                                      Prob > F      =   0.0000
Total (centered) SS     =   10446.9905                Centered R2   =  -0.0012
Total (uncentered) SS   =   10446.9905                Uncentered R2 =  -0.0012
Residual SS             =  10459.23769                Root MSE      =    .1223

-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |   .0623021   .1778023     0.35   0.726    -.2861864    .4107906
                      hh_income |  -2.82e-08   1.94e-08    -1.45   0.146    -6.62e-08    9.84e-09
             hh_adult_schooling |   .0038474   .0005673     6.78   0.000     .0027355    .0049594
                 hh_adult_hours |   .0000174   .0000169     1.03   0.302    -.0000157    .0000506
       hh_adult_employment_rate |  -.0047248   .0031161    -1.52   0.129    -.0108322    .0013826
           hh_n_employed_adults |   .0072424   .0010535     6.87   0.000     .0051776    .0093072
            hh_n_other_children |   .0038085   .0012883     2.96   0.003     .0012834    .0063335
                    hh_children |  -.0013302   .0009269    -1.44   0.151    -.0031468    .0004865
                    ln_hom_lag1 |  -.0126082   .0382312    -0.33   0.742    -.0875406    .0623241
                    ln_hom_lag2 |  -.0003224    .003808    -0.08   0.933    -.0077861    .0071412
                    ln_hom_lag3 |   .0027028   .0135905     0.20   0.842    -.0239343    .0293399
                        pop_tot |   7.41e-08   5.45e-08     1.36   0.174    -3.27e-08    1.81e-07
                    pct_pop_fem |   407.3407   375.4709     1.08   0.278    -328.5741    1143.255
                        avg_age |   .0001482   .0003196     0.46   0.643    -.0004782    .0007746
             avg_hh_adult_hours |  -.0008374   .0001837    -4.56   0.000    -.0011975   -.0004772
         avg_hh_adult_schooling |   -.000656    .001017    -0.65   0.519    -.0026494    .0013373
                avg_hh_children |  -.0000823   .0034175    -0.02   0.981    -.0067806     .006616
                     avg_income |  -6.70e-07   9.08e-07    -0.74   0.460    -2.45e-06    1.11e-06
                    avg_hincome |   .0001174   .0001115     1.05   0.293    -.0001012    .0003359
                employment_rate |  -.0270804   .0113428    -2.39   0.017     -.049312   -.0048488
       avg_hh_n_employed_adults |  -.0132274   .0037009    -3.57   0.000     -.020481   -.0059737
                    avg_hh_size |   .0052285    .002527     2.07   0.039     .0002757    .0101812
        avg_weekly_hours_worked |   .0019837   .0003889     5.10   0.000     .0012214     .002746
avg_weekly_hours_worked_workers |  -.0000509   .0002204    -0.23   0.817    -.0004828     .000381
                   pct_pop_male |   407.7027   375.4292     1.09   0.277    -328.1303    1143.536
                pct_pop_student |  -.7874544   .6636438    -1.19   0.235    -2.088182    .5132728
-------------------------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             63.012
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               83.118
                         (Kleibergen-Paap rk Wald F statistic):         63.036
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: hh_income hh_adult_schooling hh_adult_hours
                      hh_adult_employment_rate hh_n_employed_adults
                      hh_n_other_children hh_children ln_hom_lag1 ln_hom_lag2
                      ln_hom_lag3 pop_tot pct_pop_fem avg_age avg_hh_adult_hours
                      avg_hh_adult_schooling avg_hh_children avg_income
                      avg_hincome employment_rate avg_hh_n_employed_adults
                      avg_hh_size avg_weekly_hours_worked
                      avg_weekly_hours_worked_workers pct_pop_male
                      pct_pop_student
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |       166           1         165     |
              id |    169371      169371           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

.                 
. local b_8 = _b[ln_homicide]

. local se_8 = _se[ln_homicide]

. local N_8 = e(N)

. local kp_8 = e(rkf)

. quietly sum school if e(sample)

. local mean_8 : display %6.3f r(mean)

. restore

. 
. * -----------------------------------------------------------------------------
. * 6) Gender -- Only want coefficients and SE (no table presented)
. * -----------------------------------------------------------------------------
. 
. * Males only
. preserve

. keep if sex == 1
(653,150 observations deleted)

. 
. ivreghdfe dropout hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student (ln_homicide = iv), /// 
>         absorb(i.month_year_date i.id) cluster(id) first
(dropped 14648 singleton observations)
(MWFE estimator converged in 43 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                 636137
Number of clusters (id) =       145762
-------------------------------------------------------------------------------------------------
                                |               Robust
                    ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                             iv |  -9.10e-07   1.11e-07    -8.20   0.000    -1.13e-06   -6.92e-07
                      hh_income |   1.77e-08   1.66e-08     1.07   0.284    -1.47e-08    5.02e-08
             hh_adult_schooling |    .000334   .0005815     0.57   0.566    -.0008057    .0014737
                 hh_adult_hours |  -7.33e-06   .0000121    -0.60   0.546    -.0000311    .0000165
       hh_adult_employment_rate |   .0057501   .0023598     2.44   0.015     .0011249    .0103753
           hh_n_employed_adults |  -.0023015   .0008098    -2.84   0.004    -.0038887   -.0007143
            hh_n_other_children |  -.0009828   .0008935    -1.10   0.271     -.002734    .0007683
                    hh_children |  -.0017345   .0008063    -2.15   0.031    -.0033149   -.0001542
                    ln_hom_lag1 |   .2202014   .0035702    61.68   0.000      .213204    .2271989
                    ln_hom_lag2 |   .0226177   .0026989     8.38   0.000      .017328    .0279074
                    ln_hom_lag3 |  -.0725122   .0024401   -29.72   0.000    -.0772946   -.0677298
                        pop_tot |   9.38e-08   3.37e-08     2.78   0.005     2.77e-08    1.60e-07
                    pct_pop_fem |  -1558.858   841.2311    -1.85   0.064    -3207.643    89.92819
                        avg_age |   .0009325   .0002386     3.91   0.000     .0004648    .0014001
             avg_hh_adult_hours |   .0004593    .000152     3.02   0.003     .0001614    .0007571
         avg_hh_adult_schooling |   .0047863   .0005774     8.29   0.000     .0036546     .005918
                avg_hh_children |   .0156096   .0027639     5.65   0.000     .0101924    .0210268
                     avg_income |  -1.54e-06   7.26e-07    -2.12   0.034    -2.96e-06   -1.13e-07
                    avg_hincome |  -.0003757   .0000983    -3.82   0.000    -.0005684    -.000183
                employment_rate |    .014328   .0089068     1.61   0.108    -.0031291    .0317851
       avg_hh_n_employed_adults |  -.0017029   .0036153    -0.47   0.638    -.0087888    .0053831
                    avg_hh_size |  -.0012687   .0022103    -0.57   0.566    -.0056009    .0030634
        avg_weekly_hours_worked |    .000637   .0003333     1.91   0.056    -.0000163    .0012903
avg_weekly_hours_worked_workers |  -.0006222   .0001648    -3.78   0.000    -.0009452   -.0002992
                   pct_pop_male |  -1558.223   841.2557    -1.85   0.064    -3207.057    90.61119
                pct_pop_student |  -2.533395   .4112629    -6.16   0.000    -3.339457   -1.727333
-------------------------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1,145761) =    67.20
  Prob > F      =   0.0000
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1,145761) =    67.20
  Prob > F      =   0.0000



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1,145761)  P-val | SW Chi-sq(  1) P-val | SW F(  1,145761)
ln_homicide  |      67.20    0.0000 |       67.22   0.0000 |       67.20

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=67.17    P-val=0.0000

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                      86.16
Kleibergen-Paap Wald rk F statistic                                67.20

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,145761)=    3.25     P-val=0.0715
Anderson-Rubin Wald test           Chi-sq(1)=      3.25     P-val=0.0715
Stock-Wright LM S statistic        Chi-sq(1)=      3.26     P-val=0.0711

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =     145762
Number of observations               N  =     636137
Number of regressors                 K  =         26
Number of endogenous regressors      K1 =          1
Number of instruments                L  =         26
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =       145762                Number of obs =   636137
                                                      F( 26,145761) =     7.61
                                                      Prob > F      =   0.0000
Total (centered) SS     =  7708.498406                Centered R2   =  -0.0458
Total (uncentered) SS   =  7708.498406                Uncentered R2 =  -0.0458
Residual SS             =  8061.747919                Root MSE      =    .1126

-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |    .274657   .1560943     1.76   0.078    -.0312847    .5805988
                      hh_income |  -2.79e-08   1.94e-08    -1.44   0.151    -6.59e-08    1.01e-08
             hh_adult_schooling |   .0028633    .000687     4.17   0.000     .0015168    .0042098
                 hh_adult_hours |   .0000208   .0000161     1.30   0.195    -.0000107    .0000523
       hh_adult_employment_rate |  -.0073837   .0032093    -2.30   0.021    -.0136738   -.0010935
           hh_n_employed_adults |    .006713   .0011581     5.80   0.000     .0044432    .0089829
            hh_n_other_children |   .0036544   .0011418     3.20   0.001     .0014166    .0058923
                    hh_children |  -.0020737   .0010569    -1.96   0.050    -.0041452   -2.25e-06
                    ln_hom_lag1 |  -.0586799   .0344885    -1.70   0.089    -.1262767    .0089169
                    ln_hom_lag2 |   -.005755   .0040193    -1.43   0.152    -.0136327    .0021226
                    ln_hom_lag3 |   .0187744   .0114564     1.64   0.101      -.00368    .0412288
                        pop_tot |   3.06e-08   4.55e-08     0.67   0.501    -5.86e-08    1.20e-07
                    pct_pop_fem |   381.8503   358.8684     1.06   0.287    -321.5246    1085.225
                        avg_age |   .0001658    .000299     0.55   0.579    -.0004202    .0007519
             avg_hh_adult_hours |  -.0007841   .0001802    -4.35   0.000    -.0011373   -.0004308
         avg_hh_adult_schooling |  -.0010044   .0009673    -1.04   0.299    -.0029003    .0008916
                avg_hh_children |  -.0009706   .0038286    -0.25   0.800    -.0084747    .0065335
                     avg_income |  -1.94e-07   8.55e-07    -0.23   0.821    -1.87e-06    1.48e-06
                    avg_hincome |   .0001919    .000121     1.59   0.113    -.0000452    .0004291
                employment_rate |  -.0294155   .0102083    -2.88   0.004    -.0494236   -.0094074
       avg_hh_n_employed_adults |  -.0117459   .0033969    -3.46   0.001    -.0184037   -.0050881
                    avg_hh_size |   .0053139   .0023407     2.27   0.023     .0007263    .0099016
        avg_weekly_hours_worked |   .0019002   .0003481     5.46   0.000     .0012178    .0025825
avg_weekly_hours_worked_workers |  -.0000733   .0002005    -0.37   0.715    -.0004663    .0003198
                   pct_pop_male |   381.7922   358.8331     1.06   0.287    -321.5135    1085.098
                pct_pop_student |   .3497112   .5699392     0.61   0.539    -.7673584    1.466781
-------------------------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             67.174
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               86.161
                         (Kleibergen-Paap rk Wald F statistic):         67.201
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: hh_income hh_adult_schooling hh_adult_hours
                      hh_adult_employment_rate hh_n_employed_adults
                      hh_n_other_children hh_children ln_hom_lag1 ln_hom_lag2
                      ln_hom_lag3 pop_tot pct_pop_fem avg_age avg_hh_adult_hours
                      avg_hh_adult_schooling avg_hh_children avg_income
                      avg_hincome employment_rate avg_hh_n_employed_adults
                      avg_hh_size avg_weekly_hours_worked
                      avg_weekly_hours_worked_workers pct_pop_male
                      pct_pop_student
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |       166           1         165     |
              id |    145762      145762           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. local b_9 = _b[ln_homicide]

. local se_9 = _se[ln_homicide]

. restore

. 
. * Females only
. preserve

. keep if sex == 2
(693,648 observations deleted)

. 
. ivreghdfe dropout hh_income hh_adult_schooling hh_adult_hours hh_adult_employment_rate ///
>                 hh_n_employed_adults hh_n_other_children hh_children /// 
>                 ln_hom_lag1 ln_hom_lag2 ln_hom_lag3 pop_tot pct_pop_fem ///
>                 avg_age avg_hh_adult_hours avg_hh_adult_schooling avg_hh_children /// 
>                 avg_income avg_hincome employment_rate avg_hh_n_employed_adults /// 
>                 avg_hh_size avg_weekly_hours_worked avg_weekly_hours_worked_workers /// 
>                 pct_pop_male pct_pop_student (ln_homicide = iv), /// 
>         absorb(i.month_year_date i.id) cluster(id) first
(dropped 13482 singleton observations)
(MWFE estimator converged in 42 iterations)

First-stage regressions
-----------------------


First-stage regression of ln_homicide:

Statistics robust to heteroskedasticity and clustering on id
Number of obs =                 598898
Number of clusters (id) =       136847
-------------------------------------------------------------------------------------------------
                                |               Robust
                    ln_homicide | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                             iv |  -9.74e-07   1.15e-07    -8.47   0.000    -1.20e-06   -7.49e-07
                      hh_income |   8.17e-09   1.63e-08     0.50   0.617    -2.39e-08    4.02e-08
             hh_adult_schooling |   .0011044   .0006181     1.79   0.074    -.0001071    .0023159
                 hh_adult_hours |  -9.50e-06   .0000124    -0.77   0.444    -.0000338    .0000148
       hh_adult_employment_rate |   .0029378    .002404     1.22   0.222     -.001774    .0076497
           hh_n_employed_adults |  -.0004059   .0008212    -0.49   0.621    -.0020154    .0012036
            hh_n_other_children |  -.0011771   .0009131    -1.29   0.197    -.0029668    .0006126
                    hh_children |  -.0002128   .0008143    -0.26   0.794    -.0018088    .0013832
                    ln_hom_lag1 |   .2158626   .0036025    59.92   0.000     .2088019    .2229233
                    ln_hom_lag2 |   .0203947   .0027676     7.37   0.000     .0149703    .0258191
                    ln_hom_lag3 |  -.0734469   .0024682   -29.76   0.000    -.0782844   -.0686093
                        pop_tot |   1.63e-07   3.50e-08     4.66   0.000     9.45e-08    2.32e-07
                    pct_pop_fem |  -2405.245   864.9916    -2.78   0.005      -4100.6   -709.8887
                        avg_age |   .0008197    .000258     3.18   0.001      .000314    .0013254
             avg_hh_adult_hours |    .000467   .0001564     2.99   0.003     .0001605    .0007735
         avg_hh_adult_schooling |   .0041462   .0006017     6.89   0.000     .0029669    .0053255
                avg_hh_children |   .0080282   .0032758     2.45   0.014     .0016077    .0144486
                     avg_income |  -2.51e-06   8.17e-07    -3.07   0.002    -4.11e-06   -9.08e-07
                    avg_hincome |  -.0002133   .0001159    -1.84   0.066    -.0004405    .0000138
                employment_rate |   .0154461   .0092077     1.68   0.093    -.0026007     .033493
       avg_hh_n_employed_adults |  -.0052747   .0036336    -1.45   0.147    -.0123964     .001847
                    avg_hh_size |   .0051342   .0024517     2.09   0.036      .000329    .0099395
        avg_weekly_hours_worked |   .0009276   .0003328     2.79   0.005     .0002754    .0015798
avg_weekly_hours_worked_workers |  -.0005684   .0001753    -3.24   0.001    -.0009119   -.0002248
                   pct_pop_male |  -2404.933   864.9876    -2.78   0.005    -4100.281   -709.5854
                pct_pop_student |  -3.233968   .4214315    -7.67   0.000     -4.05996   -2.407976
-------------------------------------------------------------------------------------------------
F test of excluded instruments:
  F(  1,136846) =    71.76
  Prob > F      =   0.0000
Sanderson-Windmeijer multivariate F test of excluded instruments:
  F(  1,136846) =    71.76
  Prob > F      =   0.0000



Summary results for first-stage regressions
-------------------------------------------

                                           (Underid)            (Weak id)
Variable     | F(  1,136846)  P-val | SW Chi-sq(  1) P-val | SW F(  1,136846)
ln_homicide  |      71.76    0.0000 |       71.78   0.0000 |       71.76

NB: first-stage test statistics cluster-robust

Stock-Yogo weak ID F test critical values for single endogenous regressor:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for i.i.d. errors only.

Underidentification test
Ho: matrix of reduced form coefficients has rank=K1-1 (underidentified)
Ha: matrix has rank=K1 (identified)
Kleibergen-Paap rk LM statistic          Chi-sq(1)=71.73    P-val=0.0000

Weak identification test
Ho: equation is weakly identified
Cragg-Donald Wald F statistic                                      94.67
Kleibergen-Paap Wald rk F statistic                                71.76

Stock-Yogo weak ID test critical values for K1=1 and L1=1:
                                   10% maximal IV size             16.38
                                   15% maximal IV size              8.96
                                   20% maximal IV size              6.66
                                   25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.

Weak-instrument-robust inference
Tests of joint significance of endogenous regressors B1 in main equation
Ho: B1=0 and orthogonality conditions are valid
Anderson-Rubin Wald test           F(1,136846)=    0.07     P-val=0.7964
Anderson-Rubin Wald test           Chi-sq(1)=      0.07     P-val=0.7964
Stock-Wright LM S statistic        Chi-sq(1)=      0.07     P-val=0.7960

NB: Underidentification, weak identification and weak-identification-robust
    test statistics cluster-robust

Number of clusters             N_clust  =     136847
Number of observations               N  =     598898
Number of regressors                 K  =         26
Number of endogenous regressors      K1 =          1
Number of instruments                L  =         26
Number of excluded instruments       L1 =          1

IV (2SLS) estimation
--------------------

Estimates efficient for homoskedasticity only
Statistics robust to heteroskedasticity and clustering on id

Number of clusters (id) =       136847                Number of obs =   598898
                                                      F( 26,136846) =     8.05
                                                      Prob > F      =   0.0000
Total (centered) SS     =  5745.277059                Centered R2   =  -0.0003
Total (uncentered) SS   =  5745.277059                Uncentered R2 =  -0.0003
Residual SS             =  5747.024889                Root MSE      =   .09797

-------------------------------------------------------------------------------------------------
                                |               Robust
                        dropout | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
--------------------------------+----------------------------------------------------------------
                    ln_homicide |  -.0339558   .1317172    -0.26   0.797    -.2921191    .2242075
                      hh_income |  -2.15e-08   1.57e-08    -1.37   0.171    -5.24e-08    9.31e-09
             hh_adult_schooling |   .0047297    .000692     6.84   0.000     .0033735    .0060859
                 hh_adult_hours |  -.0000114   .0000143    -0.80   0.424    -.0000395    .0000166
       hh_adult_employment_rate |  -.0106486    .002815    -3.78   0.000     -.016166   -.0051313
           hh_n_employed_adults |   .0074074   .0010321     7.18   0.000     .0053844    .0094304
            hh_n_other_children |   .0031193   .0010096     3.09   0.002     .0011405     .005098
                    hh_children |  -.0017051   .0009506    -1.79   0.073    -.0035682     .000158
                    ln_hom_lag1 |    .007004   .0284854     0.25   0.806    -.0488269    .0628349
                    ln_hom_lag2 |     .00176   .0031509     0.56   0.576    -.0044158    .0079358
                    ln_hom_lag3 |  -.0033819   .0097943    -0.35   0.730    -.0225786    .0158148
                        pop_tot |   1.05e-07   4.60e-08     2.29   0.022     1.52e-08    1.96e-07
                    pct_pop_fem |   265.9161   391.3191     0.68   0.497    -501.0622    1032.894
                        avg_age |  -.0001136   .0002541    -0.45   0.655    -.0006116    .0003843
             avg_hh_adult_hours |  -.0005616   .0001605    -3.50   0.000    -.0008762    -.000247
         avg_hh_adult_schooling |  -.0008006   .0007951    -1.01   0.314    -.0023589    .0007577
                avg_hh_children |   .0006923   .0028235     0.25   0.806    -.0048416    .0062262
                     avg_income |  -4.33e-07   7.80e-07    -0.55   0.579    -1.96e-06    1.10e-06
                    avg_hincome |   .0000205   .0000846     0.24   0.808    -.0001452    .0001862
                employment_rate |  -.0163104   .0096015    -1.70   0.089     -.035129    .0025083
       avg_hh_n_employed_adults |  -.0063759    .003279    -1.94   0.052    -.0128026    .0000509
                    avg_hh_size |   .0026977   .0021914     1.23   0.218    -.0015975    .0069928
        avg_weekly_hours_worked |   .0010519   .0003363     3.13   0.002     .0003927    .0017112
avg_weekly_hours_worked_workers |   .0001119   .0001769     0.63   0.527    -.0002349    .0004587
                   pct_pop_male |   266.9527   391.3118     0.68   0.495     -500.011    1033.916
                pct_pop_student |  -.6523666   .5708189    -1.14   0.253    -1.771161    .4664277
-------------------------------------------------------------------------------------------------
Underidentification test (Kleibergen-Paap rk LM statistic):             71.734
                                                   Chi-sq(1) P-val =    0.0000
------------------------------------------------------------------------------
Weak identification test (Cragg-Donald Wald F statistic):               94.673
                         (Kleibergen-Paap rk Wald F statistic):         71.756
Stock-Yogo weak ID test critical values: 10% maximal IV size             16.38
                                         15% maximal IV size              8.96
                                         20% maximal IV size              6.66
                                         25% maximal IV size              5.53
Source: Stock-Yogo (2005).  Reproduced by permission.
NB: Critical values are for Cragg-Donald F statistic and i.i.d. errors.
------------------------------------------------------------------------------
Hansen J statistic (overidentification test of all instruments):         0.000
                                                 (equation exactly identified)
------------------------------------------------------------------------------
Instrumented:         ln_homicide
Included instruments: hh_income hh_adult_schooling hh_adult_hours
                      hh_adult_employment_rate hh_n_employed_adults
                      hh_n_other_children hh_children ln_hom_lag1 ln_hom_lag2
                      ln_hom_lag3 pop_tot pct_pop_fem avg_age avg_hh_adult_hours
                      avg_hh_adult_schooling avg_hh_children avg_income
                      avg_hincome employment_rate avg_hh_n_employed_adults
                      avg_hh_size avg_weekly_hours_worked
                      avg_weekly_hours_worked_workers pct_pop_male
                      pct_pop_student
Excluded instruments: iv
Partialled-out:       _cons
                      nb: total SS, model F and R2s are after partialling-out;
                          any small-sample adjustments include partialled-out
                          variables in regressor count K
------------------------------------------------------------------------------

Absorbed degrees of freedom:
---------------------------------------------------------+
     Absorbed FE | Categories  - Redundant  = Num. Coefs |
-----------------+---------------------------------------|
 month_year_date |       166           1         165     |
              id |    136847      136847           0    *|
---------------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation

. 
. local b_10 = _b[ln_homicide]

. local se_10 = _se[ln_homicide]

. restore

. 
. 
. * -----------------------------------------------------------------------------
. * 7) Build Tables
. * -----------------------------------------------------------------------------
. forvalues j = 1/8 {
  2.     local b  = `b_`j''  
  3.     local se = `se_`j''  
  4.     
.     * t/z statistic
.     local t = abs(`b' / `se')  
  5.     local p = 2 * normal(-`t')
  6.     
.     * stars
.     local stars ""
  7.     if (`p' < 0.10) local stars "*"
  8.     if (`p' < 0.05) local stars "**"
  9.     if (`p' < 0.01) local stars "***"
 10. 
.     * formatted numbers
.     local b_tex  : display %6.3f `b'
 11.     local se_tex : display %6.3f `se'
 12.         if (`j' != 1){
 13.                 local kp_tex : display %6.2f `kp_`j''
 14.     }
 15.     * store LaTeX-ready output
.     local coef`j' "\$`b_tex'^{`stars'}\$"
 16.     local seout`j' "(`se_tex')"
 17.         if (`j' != 1){
 18.                 local kpout`j' "`kp_tex'"
 19.         }
 20.     
.     local N = `N_`j'' 
 21.     * Add comma if N > 10,000
.     if `N' >= 10000 {
 22.         local Nout`j' : display %9.0fc `N'
 23.     }
 24.     else {
 25.         local Nout`j' : display %9.0f `N'  
 26.     }
 27. }

. 
. // ============================================
. // WRITE LATEX TABLE (Main Spec)
. // ============================================
. 
. file open myfile using "${TABLES}main_iv.tex", write replace
(file ../output/Tables/main_iv.tex not found)

. 
. * Write table header
. file write myfile "\begin{tabular}{l c c c }" _n

. file write myfile "\hline\hline" _n

. file write myfile ///
> " & \shortstack{OLS \\ (1)}" ///
> " & \shortstack{Minimal \\ controls \\ (2)}" ///
> " & \shortstack{Primary \\ Specification \\  (3)} \\"  _n

. file write myfile "\hline" _n

. 
. * Coefficient row
. file write myfile "\$ \hat{\beta}_2 \$" _n

. file write myfile " & `coef1' & `coef2' & `coef3'  \\" _n

. file write myfile " & `seout1' & `seout2' & `seout3'  \\" _n

. 
. * Mean of dependent variable row
. file write myfile "\hline" _n

. file write myfile "Mean of school enrollment" _n

. file write myfile " & \$`mean_1'\$ & \$`mean_2'\$ & \$`mean_3'\$ \\" _n

. 
. * Kleibergen-Paap F-stat row
. file write myfile "Kleibergen-Paap F-stat" _n

. file write myfile " & – & `kpout2' & `kpout3' \\" _n

. 
. * Observations row
. file write myfile "\hline" _n

. file write myfile "Observations" _n

. file write myfile " & `Nout1' & `Nout2' & `Nout3' \\" _n

. 
. * Close table
. file write myfile "\hline\hline" _n

. file write myfile "\end{tabular}" _n

. 
. file close myfile

. 
. // ============================================
. // WRITE LATEX TABLE (Additional Specifications)
. // ============================================
. 
. file open myfile using "${TABLES}het_iv.tex", write replace
(file ../output/Tables/het_iv.tex not found)

. 
. * Write table header
. file write myfile "\begin{tabular}{l c c c c c c}" _n

. file write myfile "\hline\hline" _n

. file write myfile ///
> " & \shortstack{Full \\ sample \\ (1)}" ///
> " & \shortstack{2007 - 2012 \\ (2)}" ///
> " & \shortstack{2013 - 2016  \\  (3)} " ///
> " & \shortstack{2017 - 2024  \\  (4)} " ///
> " & \shortstack{Secondary  \\ school \\  (5)} " ///
> " & \shortstack{High  \\ school \\  (6)} \\ " _n

. file write myfile "\hline" _n

. 
. * Coefficient row
. file write myfile "\$ \hat{\beta}_2 \$" _n

. file write myfile " & `coef3' & `coef4' & `coef5' & `coef6' & `coef7' & `coef8'  \\" _n

. file write myfile " & `seout3' & `seout4' & `seout5' & `seout6' & `seout7' & `seout8'    \\" _n

. 
. * Mean of dependent variable row
. file write myfile "\hline" _n

. file write myfile "Mean of school enrollment" _n

. file write myfile " & \$`mean_3'\$ & \$`mean_4'\$ & \$`mean_5'\$  & \$`mean_6'\$ & \$`mean_7'\$ & \$`mean_8'\$ \\" _n

. 
. * Kleibergen-Paap F-stat row
. file write myfile "Kleibergen-Paap F-stat" _n

. file write myfile " &`kpout3' &`kpout4' &`kpout5' &`kpout6' &`kpout7' &`kpout8' \\" _n

. 
. * Observations row
. file write myfile "\hline" _n

. file write myfile "Observations" _n

. file write myfile " & `Nout3' & `Nout4' & `Nout5' & `Nout6' & `Nout7' & `Nout8'  \\" _n

. 
. * Close table
. file write myfile "\hline\hline" _n

. file write myfile "\end{tabular}" _n

. 
. file close myfile

. 
. * -----------------------------------------------------------------------------
. * 8) Save scalars
. * -----------------------------------------------------------------------------
. file open scalars using "${TABLES}main_analysis_scalars.tex", write replace
(file ../output/Tables/main_analysis_scalars.tex not found)

. 
. file write scalars "\newcommand{\MaleBeta}{" %4.3f (`b_9') "}" _n

. file write scalars "\newcommand{\MaleSE}{" %4.3f (`se_9') "}" _n

. file write scalars "\newcommand{\FemaleBeta}{" %4.3f (`b_10') "}" _n

. file write scalars "\newcommand{\FemaleSE}{" %4.3f (`se_10') "}" _n

. file write scalars "\newcommand{\TotalBeta}{" %4.3f (`b_3') "}" _n

. file write scalars "\newcommand{\RecentBeta}{" %4.3f (`b_6') "}" _n

. file write scalars "\newcommand{\SecondaryBeta}{" %4.3f (`b_7') "}" _n

. 
. file close scalars

. 
end of do-file

The following files were created in main_results.do:
het_iv.tex main_iv.tex main_analysis_scalars.tex 

make.sh finished at 2026-02-04 17:20:52
